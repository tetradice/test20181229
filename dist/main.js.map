{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.ts","webpack:///./src/sakuraba.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AClFA,0EAAuC;AAOvC;IAAA;IAUA,CAAC;IATG,wBAAwB;IACjB,aAAI,GAAX,UAAY,QAAgB,EAAE,UAAkB,EAAE,OAAmB,EAAE,OAAmB;QAAxC,qCAAmB;QAAE,qCAAmB;QACtF,IAAI,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;QACzB,IAAI,SAAS,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;QAEpC,MAAM,CAAC,IAAI,CAAC,UAAS,CAAC,EAAE,IAAI;YACxB,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,EAAK,OAAO,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,OAAI,CAAC,CAAC,GAAG,CAAC,KAAK,EAAK,OAAO,OAAI,CAAC,CAAC;QAC/F,CAAC,CAAC,CAAC;IACP,CAAC;IACL,eAAC;AAAD,CAAC;AAED;IAAA;QAII,cAAS,GAAY,IAAI,CAAC;QAC1B,YAAO,GAAW,CAAC,CAAC;QAOpB,SAAI,GAAW,CAAC,CAAC;QACjB,QAAG,GAAW,CAAC,CAAC;QAEhB,UAAK,GAAY,KAAK,CAAC;IA0B3B,CAAC;IApBG;;OAEG;IACH,qCAAiB,GAAjB;QACI,OAAO,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,SAAS;eAClC,IAAI,CAAC,aAAa,KAAK,IAAI,CAAC,gBAAgB;eAC5C,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,YAAY;eACpC,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,UAAU;IACvC,CAAC;IAED,kCAAc,GAAd;QACI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC;QAC7B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,aAAa,CAAC;QAC3C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC;QACnC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC;IACnC,CAAC;IAED,sBAAI,mCAAY;aAAhB;YACI,OAAO,CAAC,CAAC;QACb,CAAC;;;OAAA;IACL,gBAAC;AAAD,CAAC;AAED;IAA4B,iCAAS;IAArC;QAAA,qEAgDC;QA9CG,YAAM,GAAY,KAAK,CAAC;;IA8C5B,CAAC;IA3CG,8BAAM,GAAN;QACI,OAAM,CAAC,qDAA8C,IAAI,CAAC,aAAa,0BAAmB,IAAI,CAAC,IAAI,CAAC,EAAE,uBAAgB,IAAI,CAAC,kBAAkB,EAAE,cAAU,CAAC,CAAC;IAC/J,CAAC;IAED,yCAAiB,GAAjB;QACI,OAAO,iBAAM,iBAAiB,WAAE,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,SAAS,CAAC;IACvE,CAAC;IAED,sCAAc,GAAd;QACI,iBAAM,cAAc,WAAE,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC;IACjC,CAAC;IAED,0CAAkB,GAAlB;QACI,IAAI,aAAa,GAAG,eAAa,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,2BAAsB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,2BAAwB;QACrH,IAAI,IAAI,GAAG,uDAAqD,aAAe;QAE/E,IAAI,IAAI,gCAAgC;QAExC,IAAI,YAAY,GAAG,EAAE,CAAC;QACtB,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;YAAE,YAAY,CAAC,IAAI,CAAC,wDAAwD,CAAC,CAAC;QAC5H,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;YAAE,YAAY,CAAC,IAAI,CAAC,yDAAyD,CAAC,CAAC;QAC7H,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC;YAAE,YAAY,CAAC,IAAI,CAAC,0DAA0D,CAAC,CAAC;QAC/H,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC;YAAE,YAAY,CAAC,IAAI,CAAC,2DAA2D,CAAC,CAAC;QACjI,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;YAAE,YAAY,CAAC,IAAI,CAAC,yDAAyD,CAAC,CAAC;QAChI,IAAI,IAAI,KAAG,YAAY,CAAC,IAAI,CAAC,GAAG,CAAG,CAAC;QACpC,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,SAAS,EAAC;YAClC,IAAI,IAAI,6DAAuC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,YAAS;SAC/E;QACD,IAAI,IAAI,MAAM,CAAC;QACf,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAC;YACrC,IAAI,IAAI,4DAAgD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,WAAQ,CAAC;SACvF;QACD,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC;YAC5C,IAAI,IAAI,aAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,SAAM,CAAC;SAC/C;QACD,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,SAAS,EAAC;YACnC,IAAI,IAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,SAAM,CAAC;SAC1C;QACD,IAAI,IAAI,KAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAG,CAAC;QACvD,IAAI,IAAI,QAAQ,CAAC;QACjB,OAAO,IAAI,CAAC;IAChB,CAAC;IACL,oBAAC;AAAD,CAAC,CAhD2B,SAAS,GAgDpC;AAED;IAAmC,wCAAS;IAA5C;QAAA,qEASC;QARG,YAAM,GAAW,IAAI,CAAC;;IAQ1B,CAAC;IAPG,qCAAM,GAAN;QACI,OAAM,CAAC,yDAAkD,IAAI,CAAC,aAAa,cAAU,CAAC,CAAC;IAC3F,CAAC;IAED,sBAAI,8CAAY;aAAhB;YACI,OAAO,GAAG,CAAC;QACf,CAAC;;;OAAA;IACL,2BAAC;AAAD,CAAC,CATkC,SAAS,GAS3C;AAED;IAA6B,kCAAS;IAAtC;;IAsBA,CAAC;IArBG,+BAAM,GAAN;QACI,OAAM,CAAC,wCAAmC,IAAI,CAAC,aAAa,0IAIrD,CAAC,CAAC;IACb,CAAC;IAED,UAAU;IACV,iCAAQ,GAAR,UAAS,KAAa;QAClB,IAAG,KAAK,KAAK,CAAC,EAAC;YACX,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;SACpB;QACD,IAAG,KAAK,KAAK,CAAC,EAAC;YACX,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;SACpB;QACD,IAAG,KAAK,KAAK,CAAC,EAAC;YACX,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;SACrB;IAEL,CAAC;IACL,qBAAC;AAAD,CAAC,CAtB4B,SAAS,GAsBrC;AAED,OAAO;AACP,IAAI,KAAK,GAAG,IAAI,QAAQ,CAAC,KAAK,EAAE,CAAC;AACjC,IAAI,WAAW,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAE/C,YAAY;AACZ,IAAM,UAAU,GAAgB,EAAE,CAAC;AAEnC,QAAQ;AACR,IAAI,YAAY,GAAc,IAAI,CAAC;AACnC,IAAI,2BAA2B,GAAY,KAAK,CAAC;AAEjD,KAAK;AACL,iBAAiB,KAAK;IAClB,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;IAE3B,OAAO,CAAC,EAAE;QACN,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACb,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACpB,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KAChB;IAED,OAAO,KAAK,CAAC;AACjB,CAAC;AAED,6BAA6B,IAAmB,EAAE,MAA2B,EAAE,aAAqB;IAChG,IAAI,OAAO,GAAG,IAAI,aAAa,CAAC;IAChC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;IACpB,OAAO,CAAC,aAAa,GAAG,WAAW,GAAG,IAAI,CAAC,EAAE,CAAC;IAC9C,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;IACxB,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC;IACtC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;IACvB,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAEzB,OAAO,OAAO,CAAC;AACnB,CAAC;AAED;IACI,IAAI,IAAI,GAAG,IAAI,cAAc,CAAC;IAC9B,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;IACtB,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC;IACtC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC1B,CAAC;AAED,IAAI,qBAAqB,GAAG,CAAC,CAAC;AAC9B,oCAAoC,MAAgC,EAAE,KAAa;IAC/E,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAC;QAC1B,IAAI,OAAO,GAAG,IAAI,oBAAoB,CAAC;QACvC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QACxB,OAAO,CAAC,aAAa,GAAG,CAAC,CAAC;QAC1B,OAAO,CAAC,aAAa,GAAG,kBAAgB,qBAAuB,CAAC;QAChE,qBAAqB,EAAE,CAAC;QACxB,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC5B;AACL,CAAC;AAED,kBAAkB;AAClB;IACI,SAAS;IACT,IAAI,aAAa,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC,QAAQ,EAAE,CAAC;IAC7D,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,SAAS,EAAtB,CAAsB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAC3D,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QAC5D,IAAI,CAAC,GAAG,GAAG,aAAa,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;IAEH,SAAS;IACT,IAAI,UAAU,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC;IACvD,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,MAAM,EAAnB,CAAmB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QACxD,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QAC3D,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,UAAU;IACV,IAAI,aAAa,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC,QAAQ,EAAE,CAAC;IAC7D,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,SAAS,EAAtB,CAAsB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAC3D,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QAC9D,IAAI,CAAC,GAAG,GAAG,aAAa,CAAC,GAAG,GAAG,CAAC,CAAC;IACrC,CAAC,CAAC,CAAC;IAEH,WAAW;IACX,IAAI,UAAU,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC;IACvD,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,MAAM,EAAnB,CAAmB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QACxD,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QAC3D,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,UAAU;IACV,IAAI,gBAAgB,GAAG,CAAC,CAAC,8BAA8B,CAAC,CAAC,QAAQ,EAAE,CAAC;IACpE,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,aAAa,EAA1B,CAA0B,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAC/D,IAAI,CAAC,IAAI,GAAG,EAAE,GAAG,gBAAgB,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACpE,IAAI,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,gBAAgB,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACvE,CAAC,CAAC,CAAC;IAEH,UAAU;IACV,IAAI,WAAW,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC,QAAQ,EAAE,CAAC;IAC9C,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,YAAY,cAAc,EAA3B,CAA2B,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAChE,IAAG,IAAI,CAAC,OAAO,KAAK,CAAC,EAAC;YAClB,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC;YAC7B,IAAI,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,GAAG,EAAE,CAAC;SACnC;aAAM;YACH,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC;YAC7B,IAAI,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,GAAG,EAAE,CAAC;SACnC;IACL,CAAC,CAAC,CAAC;IAEH,WAAW;IACX,IAAI,cAAc,GAAG,CAAC,CAAC,oCAAoC,CAAC,CAAC,QAAQ,EAAE,CAAC;IACxE,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,UAAU,EAAvB,CAAuB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAC5D,IAAI,CAAC,IAAI,GAAG,cAAc,CAAC,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACtD,IAAI,CAAC,GAAG,GAAG,cAAc,CAAC,GAAG,GAAG,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IAEH,IAAI,UAAU,GAAG,CAAC,CAAC,gCAAgC,CAAC,CAAC,QAAQ,EAAE,CAAC;IAChE,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,MAAM,EAAnB,CAAmB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QACxD,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,IAAI,UAAU,GAAG,CAAC,CAAC,gCAAgC,CAAC,CAAC,QAAQ,EAAE,CAAC;IAChE,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,MAAM,EAAnB,CAAmB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QACxD,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,IAAI,UAAU,GAAG,CAAC,CAAC,gCAAgC,CAAC,CAAC,QAAQ,EAAE,CAAC;IAChE,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,MAAM,EAAnB,CAAmB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QACxD,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,IAAI,WAAW,GAAG,CAAC,CAAC,iCAAiC,CAAC,CAAC,QAAQ,EAAE,CAAC;IAClE,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,OAAO,EAApB,CAAoB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QACzD,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,GAAG,CAAC,CAAC;IACnC,CAAC,CAAC,CAAC;IAGH,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,SAAS,EAAtB,CAAsB,CAAC,CAAC,OAAO,CAAC,UAAC,IAA0B,EAAE,CAAC;QACjF,IAAI,MAAM,GAAG,CAAC,CAAC,mBAAiB,IAAI,CAAC,MAAM,MAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;QAE3D,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACtD,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC;IACzC,CAAC,CAAC,CAAC;IAEH,oBAAoB;IACpB,IAAI,WAAW,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;IACvC,UAAU,CAAC,OAAO,CAAC,UAAC,SAAS,EAAE,KAAK;QAChC,IAAI,KAAK,GAAW,IAAI,CAAC;QACzB,IAAG,CAAC,SAAS,CAAC,KAAK,EAAC;YAChB,CAAC,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC;YACvC,KAAK,GAAG,CAAC,CAAC,MAAI,SAAS,CAAC,aAAe,CAAC,CAAC;SAC5C;QAED,IAAG,CAAC,SAAS,CAAC,KAAK,IAAI,SAAS,CAAC,iBAAiB,EAAE,EAAC;YACjD,IAAG,KAAK,KAAK,IAAI,EAAC;gBACd,KAAK,GAAG,CAAC,CAAC,MAAI,SAAS,CAAC,aAAe,CAAC,CAAC;aAC5C;YAED,yBAAyB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;YAE5C,aAAa;YACb,SAAS,CAAC,cAAc,EAAE,CAAC;SAC9B;QAED,aAAa;QACb,IAAG,CAAC,SAAS,CAAC,KAAK,EAAC;YAChB,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;SAC1B;IACL,CAAC,CAAC,CAAC;IAEH,cAAc;IACd,CAAC,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,EAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAC,CAAC,CAAC;AACnM,CAAC;AAED,mCAAmC,SAAoB,EAAE,KAAa;IAClE,YAAY;IACZ,IAAG,SAAS,CAAC,SAAS,EAAC;QACnB,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;KAC/B;SAAM;QACH,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;KACjC;IAED,KAAK;IACL,KAAK,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC,CAAC;IAClD,IAAG,SAAS,CAAC,OAAO,KAAK,CAAC,EAAC;QACvB,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;KAC7B;SAAM,IAAG,SAAS,CAAC,OAAO,KAAK,CAAC,CAAC,EAAC;QAC/B,KAAK,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;KACrC;IAED,UAAU;IACV,IAAG,SAAS,YAAY,aAAa,EAAC;QAClC,QAAQ;QACR,KAAK,CAAC,WAAW,CAAC,CAAC,aAAa,EAAE,aAAa,EAAE,cAAc,EAAE,cAAc,CAAC,CAAC,CAAC;QAClF,IAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAC;YACzC,IAAG,SAAS,CAAC,MAAM,EAAC;gBAChB,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;aACjC;iBAAM;gBACH,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;aACjC;SACJ;QACD,IAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAC;YAC1C,IAAG,SAAS,CAAC,MAAM,EAAC;gBAChB,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;aAClC;iBAAM;gBACH,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;aAClC;SACJ;QAED,UAAU;QACV,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;KAEhE;IAED,UAAU;IACV,IAAI,SAAS,YAAY,cAAc,EAAE;QACrC,IAAG,WAAW,CAAC,KAAK,KAAK,CAAC,EAAC;YACvB,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC5C,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;SACxD;QACD,IAAG,WAAW,CAAC,KAAK,KAAK,CAAC,EAAC;YACvB,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACrD,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;SAClD;QACD,IAAG,WAAW,CAAC,KAAK,KAAK,CAAC,EAAC;YACvB,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC5C,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;SACxD;KACJ;IACD,4BAA4B;IAC5B,KAAK,CAAC,GAAG,CAAC,EAAC,IAAI,EAAE,SAAS,CAAC,IAAI,EAAE,GAAG,EAAE,SAAS,CAAC,GAAG,EAAC,CAAC,CAAC;IACtD,KAAK,CAAC,GAAG,CAAC,EAAC,MAAM,EAAE,SAAS,CAAC,YAAY,GAAG,SAAS,CAAC,aAAa,EAAC,CAAC,CAAC;IAEtE,YAAY;IACZ,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;AAChD,CAAC;AAGD;IACI,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAChC,mBAAmB,CAAC,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;IAC5C,CAAC,CAAC,CAAC;AACP,CAAC;AAED;IACI,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAC9B,mBAAmB,CAAC,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC;AACP,CAAC;AAED;IACI,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QACjC,mBAAmB,CAAC,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;IAC5C,CAAC,CAAC,CAAC;AACP,CAAC;AAGD;IACI,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAC7B,mBAAmB,CAAC,IAAI,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;AACP,CAAC;AAGD;IACI,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QACnC,mBAAmB,CAAC,IAAI,EAAE,aAAa,EAAE,CAAC,CAAC,CAAC;IAChD,CAAC,CAAC,CAAC;AACP,CAAC;AAED;IACI,oBAAoB,EAAE,CAAC;AAC3B,CAAC;AAED;IACI,0BAA0B,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;IAC3C,0BAA0B,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IACtC,0BAA0B,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAC3C,CAAC;AAED,mBAAmB,IAAY;IAC3B,CAAC,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAC/C,CAAC;AAED,SAAS;AACT,kBAAkB,IAAuB,EAAE,SAAiB,EAAE,EAAqB,EAAE,WAA4B;IAA5B,iDAA4B;IAC7G,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;IAE7D,gBAAgB;IAEhB,KAAK;IACL,IAAI,IAAmB,CAAC;IACxB,IAAG,IAAI,KAAK,SAAS,EAAC;QAClB,IAAI,GAAG,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KAEtD;IACD,IAAG,IAAI,KAAK,MAAM,EAAC;QACf,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACpD;IACD,IAAG,IAAI,KAAK,MAAM,EAAC;QACf,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACnD;IACD,IAAG,IAAI,KAAK,aAAa,EAAC;QACtB,IAAI,GAAG,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACzD;IAED,IAAI,QAAyB,CAAC;IAC9B,IAAG,EAAE,KAAK,SAAS,EAAC;QAChB,QAAQ,GAAG,WAAW,CAAC,OAAO,CAAC;KAClC;IACD,IAAG,EAAE,KAAK,MAAM,EAAC;QACb,QAAQ,GAAG,WAAW,CAAC,KAAK,CAAC;KAChC;IACD,IAAG,EAAE,KAAK,MAAM,EAAC;QACb,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC;KAC/B;IACD,IAAG,EAAE,KAAK,aAAa,EAAC;QACpB,QAAQ,GAAG,WAAW,CAAC,UAAU,CAAC;KACrC;IACD,IAAG,WAAW,EAAC;QACX,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KAC1B;SAAM;QACH,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACvB;IAED,QAAQ;IACR,IAAG,IAAI,KAAK,SAAS,IAAI,EAAE,KAAK,MAAM,EAAC;QACnC,SAAS,CAAC,wDAAc,IAAI,CAAC,IAAI,CAAC,IAAM,CAAC,CAAC;KAC7C;SAAM,IAAG,IAAI,KAAK,MAAM,IAAI,EAAE,KAAK,MAAM,EAAC;QACvC,SAAS,CAAC,WAAI,IAAI,CAAC,IAAI,CAAC,IAAI,yCAAQ,CAAC,CAAC;KACzC;SAAM,IAAG,IAAI,KAAK,MAAM,IAAI,EAAE,KAAK,aAAa,EAAC;QAC9C,SAAS,CAAC,WAAI,IAAI,CAAC,IAAI,CAAC,IAAI,mCAAO,CAAC,CAAC;KACxC;SAAM;QACH,IAAI,cAAc,GAAG;YACjB,SAAS,EAAE,IAAI;YACf,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,GAAG;YACX,aAAa,EAAE,KAAK;SAEvB,CAAC;QAEF,SAAS,CAAI,cAAc,CAAC,IAAI,CAAC,oBAAK,IAAI,CAAC,IAAI,CAAC,IAAI,oBAAK,cAAc,CAAC,EAAE,CAAC,uBAAK,CAAC,CAAC;KACrF;IAGD,mBAAmB;IACnB,8BAA8B,CAAC,IAAI,CAAC,CAAC;IACrC,8BAA8B,CAAC,EAAE,CAAC,CAAC;IAEnC,OAAO;IACP,gBAAgB,EAAE,CAAC;IAEnB,OAAO;IACP,OAAO,IAAI,CAAC;AAChB,CAAC;AAGD,kBAAkB;AAClB,wCAAwC,MAA2B;IAC/D,IAAI,KAAsB,CAAC;IAC3B,IAAG,MAAM,KAAK,SAAS,EAAC;QACpB,KAAK,GAAG,WAAW,CAAC,OAAO,CAAC;KAC/B;IACD,IAAG,MAAM,KAAK,MAAM,EAAC;QACjB,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;KAC7B;IACD,IAAG,MAAM,KAAK,MAAM,EAAC;QACjB,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC;KAC5B;IACD,IAAG,MAAM,KAAK,aAAa,EAAC;QACxB,KAAK,GAAG,WAAW,CAAC,UAAU,CAAC;KAClC;IACD,IAAG,MAAM,KAAK,SAAS,EAAC;QACpB,KAAK,GAAG,WAAW,CAAC,QAAQ,CAAC;KAChC;IACD,WAAW;IACX,KAAK,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;QAClB,IAAI,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,YAAY,aAAa,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,EAA7C,CAA6C,CAAkB,CAAC;QAChG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,MAAM,KAAK,SAAS,IAAI,IAAI,CAAC,aAAa,KAAK,WAAW,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAEtG,cAAc;QACd,IAAG,MAAM,KAAK,MAAM,IAAI,MAAM,KAAK,MAAM,EAAC;YACtC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACtB;QACD,IAAG,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,aAAa,EAAC;YAChD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACvB;QAED,IAAG,MAAM,KAAK,aAAa,EAAC;YACxB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;SACpB;QAED,IAAG,MAAM,KAAK,aAAa,EAAC;YACxB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;SACpB;IACL,CAAC,CAAC,CAAC;AACP,CAAC;AAED,kBAAkB;AAClB;IACI,IAAI,eAAe,GAAG,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,YAAY,oBAAoB,EAAjC,CAAiC,CAAC,CAAC;IAChF,IAAI,UAAU,GAAG,CAAC,CAAC;IAEnB,qBAAqB;IACrB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAC;QACxC,IAAI,IAAI,GAAG,eAAe,CAAC,UAAU,CAAyB,CAAC;QAC/D,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,UAAU,EAAE,CAAC;KAChB;IAED,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAC;QACpC,IAAI,IAAI,GAAG,eAAe,CAAC,UAAU,CAAyB,CAAC;QAC/D,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,UAAU,EAAE,CAAC;KAChB;IAED,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC,EAAE,EAAC;QACrC,IAAI,IAAI,GAAG,eAAe,CAAC,UAAU,CAAyB,CAAC;QAC/D,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,UAAU,EAAE,CAAC;KAChB;IAED,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC,EAAE,EAAC;QACrC,IAAI,IAAI,GAAG,eAAe,CAAC,UAAU,CAAyB,CAAC;QAC/D,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,UAAU,EAAE,CAAC;KAChB;IAED,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,KAAK,EAAE,CAAC,EAAE,EAAC;QACtC,IAAI,IAAI,GAAG,eAAe,CAAC,UAAU,CAAyB,CAAC;QAC/D,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;QACtB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,UAAU,EAAE,CAAC;KAChB;IAED,KAAI,IAAI,MAAM,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,EAAE;QACvC,IAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;YAC/C,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,EAAC;gBACpD,IAAI,IAAI,GAAG,eAAe,CAAC,UAAU,CAAyB,CAAC;gBAC/D,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;gBACxB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;gBACrB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;gBACvB,UAAU,EAAE,CAAC;aAChB;SACJ;KACJ;AACL,CAAC;AAED,UAAU;AACV,yBAAyB,IAA8B,EAAE,EAA4B,EAAE,MAAc,EAAE,KAAiB;IAAjB,iCAAiB;IACpH,OAAO,CAAC,GAAG,CAAC,mCAAmC,EAAE,IAAI,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC;IAElE,gBAAgB;IAChB,IAAG,IAAI,KAAK,UAAU,EAAC;QACnB,IAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK;YAAE,OAAO,KAAK,CAAC,CAAC,cAAc;KAC/D;SAAM,IAAG,IAAI,KAAK,MAAM,EAAC;QACtB,IAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK;YAAE,OAAO,KAAK,CAAC,CAAC,cAAc;KAC3D;SAAM,IAAG,IAAI,KAAK,MAAM,EAAC;QACtB,IAAG,WAAW,CAAC,IAAI,GAAG,KAAK;YAAE,OAAO,KAAK,CAAC,CAAC,cAAc;KAC5D;SAAM,IAAG,IAAI,KAAK,MAAM,EAAC;QACtB,IAAG,WAAW,CAAC,IAAI,GAAG,KAAK;YAAE,OAAO,KAAK,CAAC,CAAC,cAAc;KAC5D;SAAM,IAAG,IAAI,KAAK,OAAO,EAAC;QACvB,IAAG,WAAW,CAAC,KAAK,GAAG,KAAK;YAAE,OAAO,KAAK,CAAC,CAAC,cAAc;KAC7D;IACD,IAAG,EAAE,KAAK,UAAU,EAAC;QACjB,IAAG,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,GAAG,EAAE;YAAE,OAAO,KAAK,CAAC,CAAC,kBAAkB;KAC1E;SAAM,IAAG,EAAE,KAAK,MAAM,EAAC;QACpB,IAAG,CAAC,WAAW,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC;YAAE,OAAO,KAAK,CAAC,CAAC,kBAAkB;KACtE;IAED,KAAK;IACL,IAAG,IAAI,KAAK,UAAU,EAAC;QACnB,KAAK,CAAC,IAAI,CAAC,QAAQ,IAAI,KAAK,CAAC;KAChC;SAAM,IAAG,IAAI,KAAK,MAAM,EAAC;QACtB,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,KAAK,CAAC;KAC5B;SAAM,IAAG,IAAI,KAAK,MAAM,EAAC;QACtB,WAAW,CAAC,IAAI,IAAI,KAAK,CAAC;KAC7B;SAAM,IAAG,IAAI,KAAK,MAAM,EAAC;QACtB,WAAW,CAAC,IAAI,IAAI,KAAK,CAAC;KAC7B;SAAM,IAAG,IAAI,KAAK,OAAO,EAAC;QACvB,WAAW,CAAC,KAAK,IAAI,KAAK,CAAC;KAC9B;IAED,IAAG,EAAE,KAAK,UAAU,EAAC;QACjB,KAAK,CAAC,IAAI,CAAC,QAAQ,IAAI,KAAK,CAAC;KAChC;SAAM,IAAG,EAAE,KAAK,MAAM,EAAC;QACpB,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,KAAK,CAAC;KAC5B;SAAM,IAAG,EAAE,KAAK,MAAM,EAAC;QACpB,WAAW,CAAC,IAAI,IAAI,KAAK,CAAC;KAC7B;SAAM,IAAG,EAAE,KAAK,MAAM,EAAC;QACpB,WAAW,CAAC,IAAI,IAAI,KAAK,CAAC;KAC7B;SAAM,IAAG,EAAE,KAAK,OAAO,EAAC;QACrB,WAAW,CAAC,KAAK,IAAI,KAAK,CAAC;KAC9B;SAAM,IAAG,EAAE,KAAK,SAAS,EAAC;QACvB,IAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,SAAS;YAAE,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACtF,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC;KAC5C;IACD,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IAEnB,mBAAmB;IACnB,+BAA+B,EAAE,CAAC;IAElC,OAAO;IACP,gBAAgB,EAAE,CAAC;IAEnB,OAAO;IACP,OAAO,IAAI,CAAC;AAChB,CAAC;AAGD,sBAAsB,IAAY;IAC9B,CAAC,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC,CAAC,gBAAgB,CAAC;SACd,KAAK,CAAC,EAAC,QAAQ,EAAE,KAAK,EAAC,CAAC;SACxB,KAAK,CAAC,MAAM,CAAC,CAAC;AACvB,CAAC;AAED,sBAAsB,IAAY,EAAE,WAA6D;IAC7F,CAAC,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC,CAAC,gBAAgB,CAAC;SACd,KAAK,CAAC,EAAC,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAC,WAAW,EAAC,CAAC;SAC/C,KAAK,CAAC,MAAM,CAAC,CAAC;AACvB,CAAC;AAED,wBAAwB,IAAY,EAAE,cAAgE;IAClG,CAAC,CAAC,gCAAgC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/C,CAAC,CAAC,cAAc,CAAC;SACZ,KAAK,CAAC,EAAC,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAC,cAAc,EAAC,CAAC;SAClD,KAAK,CAAC,MAAM,CAAC,CAAC;AACvB,CAAC;AAED,MAAM;AACN,oBAAoB;AACpB,MAAM;AACN,sDAAsD;AACtD,oCAAoC;AACpC,0FAA0F;AAC1F,2DAA2D;AAC3D,QAAQ;AACR,IAAI;AAEJ;IACI,YAAY;IACZ,CAAC,CAAC,4BAA4B,CAAC,CAAC,KAAK,CAAC;QAClC,KAAK,EAAE,EAAC,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,EAAC;QAC3B,MAAM,EAAE;YACJ,IAAG,YAAY,KAAK,IAAI;gBAAE,OAAO,KAAK,CAAC;QAC3C,CAAC;KACJ,CAAC,CAAC;AACP,CAAC;AAED,CAAC,CAAC;IAEE,eAAe;IACf,IAAM,MAAM,GAAG,EAAE,EAAE,CAAC;IAEpB,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,OAAO;QACtB,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAGH,cAAc;IACd,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;IAC7C,MAAM,CAAC,IAAI,CAAC,+BAA+B,EAAE,EAAC,OAAO,EAAE,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAC,CAAC,CAAC;IAC3F,kGAAkG;IAElG,0BAA0B;IAC1B,MAAM,CAAC,EAAE,CAAC,4BAA4B,EAAE,UAAC,kBAAkB;QACvD,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACzD,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QAEzD,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,kBAAkB,CAAC,CAAC;QACnD,KAAK,GAAG,IAAI,QAAQ,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;QAC/C,WAAW,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC3C,IAAI,YAAY,GAAG,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAEtD,yBAAyB;QACzB,IAAG,WAAW,CAAC,UAAU,KAAK,IAAI,EAAC;YAC/B,IAAI,kBAAgB,GAAG,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;YACpE,IAAI,wBAAwB,GAAG,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;YAC5E,cAAc,CAAC,4JAAkC,kBAAgB,4HAA+B,EAAE,UAAC,KAAK;gBACpG,IAAI,UAAU,GAAG,CAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,EAAY,CAAC;gBACzD,IAAG,UAAU,KAAK,EAAE,EAAC;oBACjB,UAAU,GAAG,kBAAgB,CAAC;iBACjC;gBACD,MAAM,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAC,OAAO,EAAE,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,UAAU,EAAC,CAAC,CAAC;gBACjG,WAAW,CAAC,UAAU,GAAG,UAAU,CAAC;gBACpC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAErE,YAAY,CAAC,yPAAiD,CAAC,CAAC;YACpE,CAAC,CAAC,CAAC;SACN;QAED,6CAA6C;QAC7C,IAAG,WAAW,CAAC,OAAO,KAAK,IAAI,EAAC;YAC5B,CAAC,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACzC,CAAC,CAAC,oBAAoB,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;SACnD;QAED,sDAAsD;QACtD,IAAG,WAAW,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAC;YAE/B,WAAW,EAAE,CAAC;YACd,8BAA8B,CAAC,SAAS,CAAC,CAAC;YAC1C,YAAY,EAAE,CAAC;YACf,8BAA8B,CAAC,SAAS,CAAC,CAAC;YAC1C,gBAAgB,EAAE,CAAC;YAEnB,aAAa;YACb,QAAQ,EAAE,CAAC;YAGX,CAAC,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACtC,CAAC,CAAC,kBAAkB,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;SACjD;IACL,CAAC,CAAC,CAAC;IAEH,sBAAsB;IACtB,MAAM,CAAC,EAAE,CAAC,sBAAsB,EAAE,UAAC,kBAAsC;QACrE,IAAI,KAAK,GAAG,IAAI,QAAQ,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;QACnD,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACjD,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;IACrD,CAAC,CAAC,CAAC;IAEH,gBAAgB;IAChB,oDAAoD;IACpD,wCAAwC;IACxC,4CAA4C;IAC5C,wEAAwE;IACxE,IAAI;IAEJ,qCAAqC;IACrC,gCAAgC;IAChC,qBAAqB;IACrB,MAAM;IACN,qCAAqC;IACrC,gCAAgC;IAChC,qBAAqB;IACrB,MAAM;IACN,KAAI,IAAI,GAAG,IAAI,QAAQ,CAAC,WAAW,EAAC;QAChC,IAAI,IAAI,GAAG,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACrC,CAAC,CAAC,oBAAoB,CAAC,CAAC,MAAM,CAAC,oBAAkB,GAAG,UAAK,IAAI,CAAC,IAAI,UAAK,IAAI,CAAC,MAAM,eAAY,CAAC,CAAC;QAChG,CAAC,CAAC,oBAAoB,CAAC,CAAC,MAAM,CAAC,oBAAkB,GAAG,UAAK,IAAI,CAAC,IAAI,UAAK,IAAI,CAAC,MAAM,eAAY,CAAC,CAAC;KACnG;IACD,CAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAEtC,sBAAsB;IACtB;QACI,IAAI,OAAO,GAAG,CAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,EAAY,CAAC;QACtD,IAAI,OAAO,GAAG,CAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,EAAY,CAAC;QAEtD,IAAG,OAAO,KAAK,EAAE,IAAI,OAAO,KAAK,EAAE,EAAC;YAChC,CAAC,CAAC,uCAAuC,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;SACtE;aAAM;YACH,CAAC,CAAC,uCAAuC,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;SACnE;IACL,CAAC;IAED,WAAW;IACX,CAAC,CAAC,uBAAuB,CAAC,CAAC,KAAK,CAAC,UAAC,CAAC;QAC/B,IAAI,WAAW,GAA0B,EAAC,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,EAAC,IAAI,EAAE,oBAAoB,EAAE,MAAM,EAAE,qBAAqB,EAAC,CAAC,EAAC,CAAC;QACvI,CAAC,CAAC,+BAA+B,CAAC,CAAC,IAAI,CAAC;YACpC,MAAM,EAAE;gBACJ,OAAO,EAAE,WAAW;aACvB;SACJ,CAAC,CAAC;QACH,CAAC,CAAC,sBAAsB,CAAC,CAAC,KAAK,CAAC,EAAC,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE;gBACxE,mCAAmC;gBACnC,IAAG,WAAW,CAAC,OAAO,KAAK,IAAI,EAAC;oBAC5B,CAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpD,CAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;iBACvD;gBAED,QAAQ;gBACR,2BAA2B,EAAE,CAAC;YAElC,CAAC,EAAE,SAAS,EAAC;gBACT,IAAG,CAAC,CAAC,CAAC,+BAA+B,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,EAAC;oBACzD,OAAO,KAAK,CAAC;iBAChB;gBAED,CAAC,CAAC,oBAAoB,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;gBAEhD,aAAa;gBACb,IAAI,OAAO,GAAG,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,EAAqB,EAAE,CAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,EAAqB,CAAC,CAAC;gBACnH,IAAI,MAAM,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC1C,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;gBAEzB,mBAAmB;gBACnB,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,EAAC,OAAO,EAAE,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAC,CAAC,CAAC;gBAC7F,OAAO,SAAS,CAAC;YACrB,CAAC,EAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACtB,CAAC,CAAC,CAAC;IAEH,CAAC,CAAC,wCAAwC,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAS,CAAC;QAC/D,2BAA2B,EAAE,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,mBAAmB;IACnB;QACI,IAAI,eAAe,GAAG,CAAC,CAAC,kDAAkD,CAAC,CAAC,MAAM,CAAC;QACnF,IAAI,gBAAgB,GAAG,CAAC,CAAC,mDAAmD,CAAC,CAAC,MAAM,CAAC;QAErF,IAAI,WAAW,GAAG,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QAC3F,CAAC,CAAC,yBAAyB,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,EAAC,KAAK,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC,WAAW,KAAK,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAC,CAAC,CAAC;QACxI,IAAI,YAAY,GAAG,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QAC9F,CAAC,CAAC,0BAA0B,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,EAAC,KAAK,EAAE,YAAY,EAAE,UAAU,EAAE,CAAC,YAAY,KAAK,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAC,CAAC,CAAC;QAE5I,IAAG,eAAe,KAAK,CAAC,IAAI,gBAAgB,KAAK,CAAC,EAAC;YAC/C,CAAC,CAAC,oCAAoC,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;SACnE;aAAM;YACH,CAAC,CAAC,oCAAoC,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;SAChE;IACL,CAAC;IAED,sBAAsB;IACtB,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,6BAA6B,EAAE,UAAS,CAAC;QAC3D,SAAS;QACT,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;QAEhC,YAAY;QACZ,gBAAgB,EAAE,CAAC;IACvB,CAAC,CAAC,CAAC;IAEH,WAAW;IACX,CAAC,CAAC,oBAAoB,CAAC,CAAC,KAAK,CAAC,UAAC,CAAC;QAC5B,IAAI,OAAO,GAAe,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QAEvC,mCAAmC;QACnC,KAAI,IAAI,GAAG,IAAI,QAAQ,CAAC,SAAS,EAAC;YAC9B,IAAI,IAAI,GAAG,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACnC,IAAG,IAAI,CAAC,MAAM,KAAK,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAC;gBACpE,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACxB;YACD,IAAG,IAAI,CAAC,MAAM,KAAK,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAC;gBACpE,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACxB;YACD,IAAG,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAC;gBAC5E,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACxB;SACJ;QAED,OAAO,CAAC,OAAO,CAAC,UAAC,YAAY,EAAE,CAAC;YAC5B,YAAY,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,CAAC;gBAE3B,IAAI,IAAI,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACrC,IAAI,IAAI,GAAG,IAAI,aAAa,EAAE,CAAC;gBAC/B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;gBACjB,IAAI,CAAC,aAAa,GAAG,UAAQ,IAAI,CAAC,EAAI,CAAC;gBACvC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;gBAE9B,CAAC,CAAC,uBAAuB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;gBAEjD,yBAAyB,CAAC,IAAI,EAAE,CAAC,CAAC,MAAI,IAAI,CAAC,aAAe,CAAC,CAAC,CAAC;YACjE,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,IAAI,QAAQ,GAA6B;YACrC,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE;gBACvC,YAAY;gBACZ,gBAAgB,EAAE,CAAC;gBAEnB,gBAAgB;gBAChB,QAAQ,EAAE,CAAC;YACf,CAAC;YACD,SAAS,EAAE;gBACP,uBAAuB;gBACvB,IAAI,WAAW,GAAQ,CAAC,CAAC,kDAAkD,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAE,IAAI,IAAK,WAAI,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,EAA/C,CAA+C,CAAC,CAAC,GAAG,EAAE,CAAC;gBACrJ,WAAW,CAAC,OAAO,GAAG,WAA8B,CAAC;gBACrD,IAAI,YAAY,GAAQ,CAAC,CAAC,mDAAmD,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAE,IAAI,IAAK,WAAI,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,EAA/C,CAA+C,CAAC,CAAC,GAAG,EAAE,CAAC;gBACvJ,WAAW,CAAC,QAAQ,GAAG,YAA+B,CAAC;gBACvD,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;gBAEzB,WAAW,EAAE,CAAC;gBACd,8BAA8B,CAAC,SAAS,CAAC,CAAC;gBAC1C,YAAY,EAAE,CAAC;gBACf,8BAA8B,CAAC,SAAS,CAAC,CAAC;gBAC1C,gBAAgB,EAAE,CAAC;gBAEnB,aAAa;gBACb,QAAQ,EAAE,CAAC;gBAEX,gBAAgB;gBAChB,CAAC,CAAC,kBAAkB,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;gBAE9C,mBAAmB;gBACnB,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,EAAC,OAAO,EAAE,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,WAAW,CAAC,QAAQ,EAAC,CAAC,CAAC;YAE1I,CAAC;YACD,MAAM,EAAE;gBACJ,YAAY;gBACZ,CAAC,CAAC,uBAAuB,CAAC,CAAC,KAAK,EAAE,CAAC;YACvC,CAAC;SACJ;QACD,CAAC,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACzD,CAAC,CAAC,CAAC;IAEH,aAAa;IACb,CAAC,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE;QAC9B,YAAY,CAAC,8CAA8C,EAAE;QAC7D,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;IAEH,SAAS;IACT,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,yBAAyB,EAAE,UAAS,CAAC;QAC7D,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,CAAE,sCAAsC;QACnE,qGAAqG;QACrG,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,IAAI,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,KAAK,EAAE,EAAtB,CAAsB,CAAC,CAAC;QAExD,wCAAwC;QACxC,IAAG,IAAI,CAAC,MAAM,KAAK,MAAM,EAAC;YACtB,KAAK;YACL,CAAC,CAAC,4BAA4B,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACrD,YAAY,GAAG,IAAI,CAAC;SACvB;QAED,IAAG,IAAI,CAAC,MAAM,KAAK,SAAS,EAAC;YACzB,KAAK;YACL,CAAC,CAAC,+BAA+B,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACxD,YAAY,GAAG,IAAI,CAAC;SACvB;QAED,IAAG,IAAI,CAAC,MAAM,KAAK,MAAM,EAAC;YACtB,OAAO;YACP,CAAC,CAAC,4BAA4B,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACrD,YAAY,GAAG,IAAI,CAAC;SACvB;QAED,IAAG,IAAI,CAAC,MAAM,KAAK,aAAa,EAAC;YAC7B,MAAM;YACN,CAAC,CAAC,mCAAmC,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAC5D,YAAY,GAAG,IAAI,CAAC;SACvB;QAED,IAAG,IAAI,CAAC,MAAM,KAAK,UAAU,EAAC;YAC1B,KAAK;YACL,CAAC,CAAC,oDAAoD,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAC7E,YAAY,GAAG,IAAI,CAAC;SACvB;QACD,IAAG,IAAI,CAAC,MAAM,KAAK,MAAM,EAAC;YACtB,MAAM;YACN,CAAC,CAAC,gDAAgD,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACzE,YAAY,GAAG,IAAI,CAAC;SACvB;QACD,IAAG,IAAI,CAAC,MAAM,KAAK,MAAM,EAAC;YACtB,MAAM;YACN,CAAC,CAAC,gDAAgD,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACzE,YAAY,GAAG,IAAI,CAAC;YAEpB,wBAAwB;YACxB,CAAC,CAAC,oBAAoB,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;SACjD;QAED,IAAG,IAAI,CAAC,MAAM,KAAK,MAAM,EAAC;YACtB,MAAM;YACN,CAAC,CAAC,gDAAgD,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACzE,YAAY,GAAG,IAAI,CAAC;SACvB;QAED,IAAG,IAAI,CAAC,MAAM,KAAK,OAAO,EAAC;YACvB,MAAM;YACN,CAAC,CAAC,iDAAiD,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAC1E,YAAY,GAAG,IAAI,CAAC;SACvB;QAED,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,YAAY,CAAC,CAAC;QAE5C,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IAErC,CAAC,CAAC,CAAC;IAEH;QACI,mCAAmC;QACnC,IAAG,CAAC,2BAA2B,EAAC;YAC5B,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;YACvC,CAAC,CAAC,iBAAiB,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;SAC5C;QAED,CAAC,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,CAAC;QAC3C,YAAY,GAAG,IAAI,CAAC;IACxB,CAAC;IAED,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,SAAS,EAAE,yBAAyB,EAAE,UAAS,CAAC;QAC3D,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC7B,gBAAgB,EAAE,CAAC;IAEvB,CAAC,CAAC,CAAC;IACH,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE,YAAY,EAAE,UAAS,CAAC;QAC/C,IAAI,CAAC,CAAC,cAAc,EAAE;YAClB,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,gCAAgC;SACvD;QACD,qFAAqF;QAErF,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC,CAAC;IAEH,eAAe;IACf,CAAC,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,UAAS,CAAC;QAC3C,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IACjE,CAAC,CAAC,CAAC;IAEH,CAAC,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,UAAS,CAAC;QAC3C,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAE,8CAA8C;IACpH,CAAC,CAAC,CAAC;IACH,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,qBAAqB,EAAE,UAAS,CAAC;QACzD,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IAChC,CAAC,CAAC,CAAC;IACH,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,qBAAqB,EAAE,UAAS,CAAC;QACzD,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAE,8CAA8C;IACnF,CAAC,CAAC,CAAC;IAGH,IAAI,gBAA2B,CAAC;IAChC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE,2BAA2B,EAAE,UAAS,CAAC;QAC1D,6CAA6C;QAC7C,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAC1B,IAAI,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;QAEpB,IAAI,CAAC,CAAC,eAAe,EAAE;YACnB,CAAC,CAAC,eAAe,EAAE,CAAC,CAAC,sCAAsC;SAC9D;QAED,YAAY;QACZ,IAAI,EAAuB,CAAC;QAC5B,IAAG,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC;YAAE,EAAE,GAAG,MAAM,CAAC;QACvC,IAAG,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC;YAAE,EAAE,GAAG,MAAM,CAAC;QACvC,IAAG,KAAK,CAAC,EAAE,CAAC,mBAAmB,CAAC;YAAE,EAAE,GAAG,aAAa,CAAC;QACrD,IAAG,KAAK,CAAC,EAAE,CAAC,eAAe,CAAC;YAAE,EAAE,GAAG,SAAS,CAAC;QAC7C,IAAG,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC;YAAE,EAAE,GAAG,UAAU,CAAC;QAC/C,IAAG,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC;YAAE,EAAE,GAAG,MAAM,CAAC;QACvC,IAAG,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC;YAAE,EAAE,GAAG,MAAM,CAAC;QACvC,IAAG,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC;YAAE,EAAE,GAAG,MAAM,CAAC;QACvC,IAAG,KAAK,CAAC,EAAE,CAAC,aAAa,CAAC;YAAE,EAAE,GAAG,OAAO,CAAC;QACzC,IAAG,KAAK,CAAC,EAAE,CAAC,WAAW,CAAC;YAAE,EAAE,GAAG,SAAS,CAAC;QAEzC,IAAG,YAAY,KAAK,IAAI,EAAC;YACrB,iBAAiB;YACjB,IAAG,EAAE,KAAK,SAAS,EAAC;gBAChB,gBAAgB,GAAG,YAAY,CAAC;gBAChC,2BAA2B,GAAG,IAAI,CAAC;gBACnC,CAAC,CAAC,0BAA0B,CAAC,CAAC,WAAW,CAAC,EAAC,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,EAAC,CAAC,CAAC;gBACpE,OAAO,KAAK,CAAC;aAChB;iBAAM;gBACH,cAAc;gBACd,IAAG,YAAY,YAAY,aAAa,EAAC;oBACrC,QAAQ,CAAC,YAAY,CAAC,MAA2B,EAAE,YAAY,CAAC,aAAa,EAAE,EAAuB,CAAC,CAAC;oBACxG,OAAO,KAAK,CAAC;iBAChB;gBAED,IAAG,YAAY,YAAY,oBAAoB,EAAC;oBAC5C,IAAI,MAAM,GAAW,IAAI,CAAC;oBAC1B,IAAG,EAAE,KAAK,SAAS,EAAC;wBAChB,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;qBACzC;oBACD,eAAe,CAAC,YAAY,CAAC,MAAkC,EAAE,EAA8B,EAAE,MAAM,CAAC,CAAC;oBACzG,OAAO,KAAK,CAAC;iBAChB;aACJ;SAIJ;QAED,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC,CAAC;IAEH,WAAW;IACX;QACI,IAAI,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,YAAY,cAAc,EAA3B,CAA2B,CAAmB,CAAC;QAClF,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QACpC,gBAAgB,EAAE,CAAC;IACvB,CAAC;IACD,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,mCAAmC,EAAE,UAAS,CAAC;QACnE,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,SAAS,CAAC,0CAAY,CAAC;QACvB,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC;QACtB,YAAY,EAAE,CAAC;QAEf,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC,CAAC;IACH,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,mCAAmC,EAAE,UAAS,CAAC;QACnE,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,IAAG,WAAW,CAAC,KAAK,KAAK,CAAC,EAAC;YACvB,SAAS,CAAC,0CAAY,CAAC,CAAC;SAC3B;aAAM;YACH,SAAS,CAAC,0CAAY,CAAC,CAAC;SAC3B;QACD,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC;QACtB,YAAY,EAAE,CAAC;QAEf,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC,CAAC;IACH,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,mCAAmC,EAAE,UAAS,CAAC;QACnE,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,SAAS,CAAC,0CAAY,CAAC;QACvB,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC;QACtB,YAAY,EAAE,CAAC;QAEf,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC,CAAC;IAEH,OAAO;IACP,CAAC,CAAC,sBAAsB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAS,CAAC;QAC5C,CAAC,CAAC,aAAa,CAAC,CAAC,MAAM,EAAE,CAAC;IAC9B,CAAC,CAAC,CAAC;IAEH,QAAQ;IACR,CAAC,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE;QAC9B,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACjC,CAAC,CAAC,CAAC;IAEH,aAAa;IACb,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE,gCAAgC,EAAE,UAAS,CAAC;QACnE,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,IAAI,SAAS,GAAG,CAAC,CAAC,gCAAgC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAChE,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QAEvC,IAAI,IAAI,GAAG,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAC3C,IAAI,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,YAAY,aAAa,IAAI,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAxE,CAAwE,CAAkB,CAAC;QAE3H,IAAG,IAAI,CAAC,IAAI,EAAC;YACT,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;YAClB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACvB;aAAM;YACH,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACtB;QAED,gBAAgB,EAAE,CAAC;QAGnB,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC,CAAC;IAEH,6DAA6D;IAC7D,qDAAqD;IAErD,sBAAsB;IACtB,6DAA6D;IAE7D,yBAAyB;IACzB,sEAAsE;IACtE,MAAM;IACN,6DAA6D;IAC7D,qDAAqD;IACrD,uDAAuD;IACvD,MAAM;IAEN,aAAa;IACb,CAAC,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,0CAA0C,CAAC,CAAC;IAC/D,CAAC,CAAC,WAAW,CAAC;QACV,OAAO,EAAE,QAAQ;QACjB,QAAQ,EAAE,0BAA0B;QACpC,QAAQ,EAAE,UAAS,GAAW;YAC1B,IAAG,GAAG,KAAK,KAAK,EAAC;gBACb,QAAQ,CAAC,MAAM,EAAE,gBAAgB,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;aAC/D;YACD,IAAG,GAAG,KAAK,QAAQ,EAAC;gBAChB,QAAQ,CAAC,MAAM,EAAE,gBAAgB,CAAC,aAAa,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;aACrE;QACL,CAAC;QACD,MAAM,EAAE;YACJ,IAAI,EAAE,UAAS,OAAO;gBAClB,2BAA2B,GAAG,KAAK,CAAC;gBACpC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBACrB,gBAAgB,EAAE,CAAC;YACvB,CAAC;SACJ;QACD,KAAK,EAAE;YACH,KAAK,EAAE,EAAC,IAAI,EAAE,MAAM,EAAC;YACrB,QAAQ,EAAE,EAAC,IAAI,EAAE,MAAM,EAAC;YACxB,KAAK,EAAE,MAAM;YACb,QAAQ,EAAE,EAAC,IAAI,EAAE,OAAO,EAAC;SAC5B;KACJ,CAAC,CAAC;IACH,cAAc;IACd,CAAC,CAAC,WAAW,CAAC;QACV,QAAQ,EAAE,uCAAuC;QACjD,QAAQ,EAAE,UAAS,GAAW;YAC1B,IAAG,GAAG,KAAK,MAAM,EAAC;gBACd,QAAQ,CAAC,SAAS,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;aAClC;YACD,IAAG,GAAG,KAAK,WAAW,IAAI,GAAG,KAAK,wBAAwB,EAAC;gBACvD,wBAAwB;gBACxB,WAAW,CAAC,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnF,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,UAAS,IAAI,EAAE,CAAC;oBACrC,IAAG,IAAI,CAAC,WAAW,KAAK,SAAS,IAAI,IAAI,CAAC,WAAW,KAAK,CAAC,EAAC;wBACxD,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBAC/B,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;qBACnC;gBACL,CAAC,CAAC,CAAC;gBACH,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,QAAC,KAAK,SAAS,EAAf,CAAe,CAAC,CAAC;gBACnE,WAAW,CAAC,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;gBAEnD,8BAA8B,CAAC,SAAS,CAAC,CAAC;gBAC1C,8BAA8B,CAAC,MAAM,CAAC,CAAC;gBACvC,8BAA8B,CAAC,aAAa,CAAC,CAAC;gBAG9C,IAAG,GAAG,KAAK,WAAW;oBAAE,eAAe,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;gBAC9D,gBAAgB,EAAE,CAAC;gBACnB,SAAS,CAAC,oBAAK,CAAC,CAAC;aACpB;QACL,CAAC;QACD,KAAK,EAAE;YACH,MAAM,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,cAAM,kBAAW,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAhC,CAAgC,EAAC;YACxE,MAAM,EAAE,WAAW;YACnB,WAAW,EAAE,EAAC,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,cAAM,kBAAW,CAAC,IAAI,KAAK,CAAC,EAAtB,CAAsB,EAAC;YACpE,wBAAwB,EAAE,EAAC,IAAI,EAAE,iBAAiB,EAAC;SACtD;KACJ,CAAC,CAAC;IAEH,eAAe;IACf,CAAC,CAAC,WAAW,CAAC;QACV,QAAQ,EAAE,wBAAwB;QAClC,QAAQ,EAAE,UAAS,GAAW;QAC9B,CAAC;QACD,KAAK,EAAE;YACH,QAAQ,EAAE,EAAC,IAAI,EAAE,OAAO,EAAC;YACzB,MAAM,EAAE,WAAW;YACnB,QAAQ,EAAE,EAAC,IAAI,EAAE,OAAO,EAAC;SAC5B;KACJ,CAAC,CAAC;IACH,gBAAgB;IAChB,CAAC,CAAC,WAAW,CAAC;QACV,QAAQ,EAAE,sBAAsB;QAChC,KAAK,EAAE,UAAS,KAAa,EAAE,KAAwB;YACnD,cAAc;YACd,IAAI,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,aAAa,CAA6B,CAAC;YACnE,IAAI,UAAU,GAAG,CAAC,CAAC;YACnB,IAAG,MAAM,KAAK,UAAU,EAAC;gBACrB,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC;aACpC;YACD,IAAG,MAAM,KAAK,MAAM,EAAC;gBACjB,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;aAChC;YACD,IAAG,MAAM,KAAK,MAAM,EAAC;gBACjB,UAAU,GAAG,WAAW,CAAC,IAAI,CAAC;aACjC;YACD,IAAG,MAAM,KAAK,MAAM,EAAC;gBACjB,UAAU,GAAG,WAAW,CAAC,IAAI,CAAC;aACjC;YACD,IAAG,MAAM,KAAK,OAAO,EAAC;gBAClB,UAAU,GAAG,WAAW,CAAC,KAAK,CAAC;aAClC;YAED,IAAI,KAAK,GAAG,EAAE,CAAC;YACf,IAAI,YAAY,GAAG;gBACf,EAAC,GAAG,EAAE,gBAAgB,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,UAAU,EAAC;gBAC1D,EAAC,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAC;gBACnD,EAAC,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAC;gBACnD,EAAC,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAC;gBACnD,EAAC,GAAG,EAAE,aAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAC;aACxD,CAAC;YACF,YAAY,CAAC,OAAO,CAAC,UAAC,IAAI;gBACtB,IAAG,MAAM,KAAK,IAAI,CAAC,MAAM;oBAAE,OAAO,IAAI,CAAC;gBAEvC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,EAAC,CAAC;gBAC/C,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,UAAU,EAAE,CAAC,EAAE,EAAC;oBAChC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,GAAG,EAAC,IAAI,EAAK,CAAC,WAAG,EAAC,CAAC;iBACzD;gBACD,OAAO,IAAI,CAAC;YAChB,CAAC,CAAC,CAAC;YACH,KAAK,CAAC,MAAM,CAAC,GAAI,WAAW,CAAC;YAC7B,KAAK,CAAC,QAAQ,CAAC,GAAI,EAAC,IAAI,EAAE,OAAO,EAAC,CAAC;YAGnC,OAAO;gBACH,QAAQ,EAAE,UAAS,GAAW;gBAC9B,CAAC;gBACD,KAAK,EAAE,KAAK;aACf;YAID,WAAW;YACX,wCAAwC;YACxC,SAAS;YACT,eAAe;YACf,oBAAoB;YACpB,2BAA2B;YAC3B,uBAAuB;YACvB,4BAA4B;YAC5B,oCAAoC;YACpC,+BAA+B;YAC/B,6CAA6C;YAC7C,6CAA6C;YAC7C,6CAA6C;YAC7C,wBAAwB;YACxB,oBAAoB;YACpB,gBAAgB;YAChB,aAAa;YACb,+BAA+B;YAC/B,qCAAqC;YACrC,QAAQ;YACR,IAAI;QAER,CAAC;KACJ,CAAC,CAAC;IAGH,mCAAmC;IACnC,8CAA8C;IAC9C,6DAA6D;IAC7D,0BAA0B;IAC1B,0BAA0B;IAC1B,oCAAoC;IACpC,MAAM;IAEN,2CAA2C;IAC3C,uBAAuB;IACvB,2BAA2B;IAC3B,0BAA0B;IAC1B,kCAAkC;IAClC,yCAAyC;IACzC,MAAM;IAEN,mDAAmD;IACnD,qHAAqH;IACrH,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B,MAAM;IAEN,+CAA+C;IAC/C,iHAAiH;IACjH,kHAAkH;IAClH,0BAA0B;IAC1B,8GAA8G;IAC9G,0BAA0B;IAC1B,yBAAyB;IACzB,MAAM;IAEN,+CAA+C;IAC/C,8BAA8B;IAC9B,mHAAmH;IACnH,0BAA0B;IAC1B,8GAA8G;IAC9G,yBAAyB;IACzB,0BAA0B;IAC1B,mCAAmC;IACnC,MAAM;IAEN,+CAA+C;IAC/C,oHAAoH;IACpH,0BAA0B;IAC1B,8GAA8G;IAC9G,0BAA0B;IAC1B,yBAAyB;IACzB,MAAM;IAEN,gDAAgD;IAChD,6BAA6B;IAC7B,0BAA0B;IAC1B,+GAA+G;IAC/G,+GAA+G;IAC/G,yBAAyB;IACzB,MAAM;IAER,CAAC;AACH,CAAC,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AC93CU,mBAAW,GAAG;IACrB,QAAQ,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAC;IACpC,OAAO,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAC;IACpC,QAAQ,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAC;IACpC,QAAQ,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAC;IACpC,OAAO,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAC;IACnC,QAAQ,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAC;IACtC,QAAQ,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAC;IACpC,QAAQ,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAC;IACpC,SAAS,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAC;IACrC,QAAQ,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAC;IACrC,SAAS,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAC;IACtC,OAAO,EAAE,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAC;CACxC,CAAC;AAgBW,iBAAS,GAAkC;IAClD,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAC;IAC1I,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,wCAAwC,EAAC;IACjL,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,qDAAqD,EAAC;IACjM,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAC;IACzJ,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,uBAAuB,EAAC;IACvI,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,6BAA6B,EAAC;IAC1J,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,WAAW,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,4DAA4D,EAAC;IAC7M,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAC;IAC7J,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,yBAAyB,EAAC;IACjM,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,qCAAqC,EAAC;IACnK,iBAAiB,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,cAAc,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,sCAAsC,EAAC;IAGvN,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,0CAA0C,EAAC;IACvL,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAC;IACxJ,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,gDAAgD,EAAC;IAC5L,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,qEAAqE,EAAC;IACjL,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,mCAAmC,EAAC;IAC/J,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,0DAA0D,EAAC;IACvM,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,WAAW,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,4DAA4D,EAAC;IACvM,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,+DAA+D,EAAC;IACzN,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,yBAAyB,EAAC;IACzJ,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,EAAE,IAAI,EAAE,0CAA0C,EAAC;IACrL,gBAAgB,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,cAAc,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,8BAA8B,EAAC;CACpN,CAAC;AAEF,MAAM;AACN;IAGI,eAAY,IAAgB;QACxB,IAAG,IAAI,KAAK,SAAS,EAAC;YAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SACpB;aAAM;YACH,IAAI,CAAC,IAAI,GAAG,IAAI,SAAS,EAAE,CAAC;SAC/B;IACL,CAAC;IAED,yBAAS,GAAT,UAAU,IAAU;QAChB,IAAG,IAAI,KAAK,IAAI,EAAC;YACb,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;SAC3B;aAAM,IAAG,IAAI,KAAK,IAAI,EAAC;YACpB,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;SAC3B;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,+BAAe,GAAf,UAAgB,IAAU;QACtB,IAAG,IAAI,KAAK,IAAI,EAAC;YACb,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;SAC3B;aAAM,IAAG,IAAI,KAAK,IAAI,EAAC;YACpB,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;SAC3B;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IACL,YAAC;AAAD,CAAC;AA5BY,sBAAK;AA8BlB;IAaI;QAZA,gBAAW,GAAG,CAAC,CAAC;QAEhB,aAAQ,GAAW,EAAE,CAAC;QACtB,SAAI,GAAW,CAAC,CAAC;QACjB,iBAAY,GAA+B,EAAE,CAAC;QAE9C,cAAS,GAAgB,EAAE,CAAC;QAC5B,YAAO,GAAgB,EAAE,CAAC;QAMtB,IAAI,CAAC,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;IAClC,CAAC;IACL,gBAAC;AAAD,CAAC;AAjBY,8BAAS;AAmBtB;IAAA;QACI,eAAU,GAAW,IAAI,CAAC;QAE1B,YAAO,GAAa,IAAI,CAAC;QAEzB,SAAI,GAAW,CAAC,CAAC;QACjB,SAAI,GAAW,EAAE,CAAC;QAClB,UAAK,GAAW,CAAC,CAAC;QAElB,UAAK,GAAW,CAAC,CAAC;QAElB,YAAO,GAAW,EAAE,CAAC;QACrB,UAAK,GAAW,EAAE,CAAC;QACnB,SAAI,GAAW,EAAE,CAAC;QAClB,eAAU,GAAW,EAAE,CAAC;QACxB,aAAQ,GAAW,EAAE,CAAC;IAC1B,CAAC;IAAD,gBAAC;AAAD,CAAC;AAhBY,8BAAS;AAkBtB;IAAA;IAGA,CAAC;IAAD,gBAAC;AAAD,CAAC;AAHY,8BAAS;AAKtB;IAMI,cAAY,EAAU;QAClB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;IACjB,CAAC;IAED,sBAAI,sBAAI;aAAR;YACI,OAAO,iBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC9B,CAAC;;;OAAA;IACL,WAAC;AAAD,CAAC;AAbY,oBAAI;AAejB;IAAiC,+BAAI;IAArC;QAAA,qEAEC;QADG,UAAI,GAAY,KAAK,CAAC;;IAC1B,CAAC;IAAD,kBAAC;AAAD,CAAC,CAFgC,IAAI,GAEpC;AAFY,kCAAW","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.ts\");\n","import * as sakuraba from './sakuraba';\r\n\r\ndeclare var params: {\r\n    boardId: string;\r\n    side: \"p1\" | \"p2\" | \"watch\";\r\n}\r\n\r\nclass Layouter {\r\n    // \r\n    static exec(selector: string, frameWidth: number, spacing: number = 8, padding: number = 4){\r\n        let $elems = $(selector);\r\n        let itemWidth = $elems.outerWidth();\r\n\r\n        $elems.each(function(i, elem){\r\n            $(elem).css('left', `${padding + (itemWidth + spacing) * i}px`).css('top', `${padding}px`);\r\n        });\r\n    }\r\n}\r\n\r\nabstract class Component {\r\n\r\n    region: sakuraba.RegionName;\r\n    indexOfRegion: number;\r\n    draggable: boolean = true;\r\n    rotated: number = 0;\r\n\r\n    oldRegion: sakuraba.RegionName;\r\n    oldIndexOfRegion: number;\r\n    oldDraggable: boolean;\r\n    oldRotated: number;\r\n\r\n    left: number = 0;\r\n    top: number = 0;\r\n\r\n    drawn: boolean = false;\r\n\r\n    htmlElementId: string;\r\n\r\n    abstract toHtml(): string;\r\n\r\n    /**\r\n     * true\r\n     */\r\n    isLocationChanged(): boolean{\r\n        return this.region !== this.oldRegion\r\n        || this.indexOfRegion !== this.oldIndexOfRegion\r\n        || this.draggable !== this.oldDraggable\r\n        || this.rotated !== this.oldRotated\r\n    }\r\n\r\n    updateLocation(): void{\r\n        this.oldRegion = this.region;\r\n        this.oldIndexOfRegion = this.indexOfRegion;\r\n        this.oldDraggable = this.draggable;\r\n        this.oldRotated = this.rotated;\r\n    }\r\n\r\n    get zIndexOffset(): number {\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass CardComponent extends Component {\r\n    card: sakuraba.Card;\r\n    opened: boolean = false;\r\n    oldOpened: boolean;\r\n\r\n    toHtml(): string{\r\n        return(`<div class=\"fbs-card\" draggable=\"true\" id=\"${this.htmlElementId}\" data-card-id=\"${this.card.id}\" data-html=\"${this.getDescriptionHtml()}\"></div>`);\r\n    }\r\n\r\n    isLocationChanged(): boolean{\r\n        return super.isLocationChanged() || this.opened !== this.oldOpened;\r\n    }\r\n\r\n    updateLocation(): void{\r\n        super.updateLocation();\r\n        this.oldOpened = this.opened;\r\n    }\r\n\r\n    getDescriptionHtml(): string{\r\n        let cardTitleHtml = `<ruby><rb>${this.card.data.name}</rb><rp>(</rp><rt>${this.card.data.ruby}</rt><rp>)</rp></ruby>`\r\n        let html = `<div class='ui header' style='margin-right: 2em;'>${cardTitleHtml}`\r\n\r\n        html += `</div><div class='ui content'>`\r\n\r\n        let typeCaptions = [];\r\n        if(this.card.data.types.indexOf('attack') >= 0) typeCaptions.push(\"<span style='color: red; font-weight: bold;'></span>\");\r\n        if(this.card.data.types.indexOf('action') >= 0) typeCaptions.push(\"<span style='color: blue; font-weight: bold;'></span>\");\r\n        if(this.card.data.types.indexOf('enhance') >= 0) typeCaptions.push(\"<span style='color: green; font-weight: bold;'></span>\");\r\n        if(this.card.data.types.indexOf('reaction') >= 0) typeCaptions.push(\"<span style='color: purple; font-weight: bold;'></span>\");\r\n        if(this.card.data.types.indexOf('fullpower') >= 0) typeCaptions.push(\"<span style='color: gold; font-weight: bold;'></span>\");\r\n        html += `${typeCaptions.join('/')}`;\r\n        if(this.card.data.range !== undefined){\r\n            html += `<span style='margin-left: 1em;'>${this.card.data.range}</span>`\r\n        }\r\n        html += `<br>`;\r\n        if(this.card.data.baseType === 'special'){\r\n            html += `<div class='ui top right attached label'>: ${this.card.data.cost}</div>`;\r\n        }\r\n        if(this.card.data.types.indexOf('enhance') >= 0){\r\n            html += `: ${this.card.data.capacity}<br>`;\r\n        }\r\n        if(this.card.data.damage !== undefined){\r\n            html += `${this.card.data.damage}<br>`;\r\n        }\r\n        html += `${this.card.data.text.replace('\\n', '<br>')}`;\r\n        html += `</div>`;\r\n        return html;\r\n    }\r\n}\r\n\r\nclass SakuraTokenComponent extends Component {\r\n    cardId: string = null; \r\n    toHtml(): string{\r\n        return(`<div class=\"sakura-token\" draggable=\"true\" id=\"${this.htmlElementId}\"></div>`);\r\n    }\r\n\r\n    get zIndexOffset(): number {\r\n        return 100;\r\n    }\r\n}\r\n\r\nclass VigorComponent extends Component {\r\n    toHtml(): string{\r\n        return(`<div class=\"fbs-vigor-card\" id=\"${this.htmlElementId}\">\r\n        <div class=\"vigor0\"></div>\r\n        <div class=\"vigor1\"></div>\r\n        <div class=\"vigor2\"></div>\r\n        </div>`);\r\n    }\r\n\r\n    // \r\n    setVigor(value: number){\r\n        if(value === 0){\r\n            this.rotated = 1;\r\n        }\r\n        if(value === 1){\r\n            this.rotated = 0;\r\n        }\r\n        if(value === 2){\r\n            this.rotated = -1;\r\n        }\r\n                \r\n    }\r\n}\r\n\r\n// \r\nlet board = new sakuraba.Board();\r\nlet myBoardSide = board.getMySide(params.side);\r\n\r\n// \r\nconst components: Component[] = [];\r\n\r\n// \r\nlet draggingFrom: Component = null;\r\nlet contextMenuShowingAfterDrop: boolean = false;\r\n\r\n// \r\nfunction shuffle(array) {\r\n    var n = array.length, t, i;\r\n\r\n    while (n) {\r\n        i = Math.floor(Math.random() * n--);\r\n        t = array[n];\r\n        array[n] = array[i];\r\n        array[i] = t;\r\n    }\r\n\r\n    return array;\r\n}\r\n\r\nfunction createCardComponent(card: sakuraba.Card, region: sakuraba.RegionName, indexOfRegion: number){\r\n    let newCard = new CardComponent;\r\n    newCard.card = card;\r\n    newCard.htmlElementId = \"fbs-card-\" + card.id;\r\n    newCard.region = region;\r\n    newCard.indexOfRegion = indexOfRegion;\r\n    newCard.opened = false;\r\n    components.push(newCard);\r\n\r\n    return newCard;\r\n}\r\n\r\nfunction createVigorComponent(){\r\n    let comp = new VigorComponent;\r\n    comp.region = 'vigor';\r\n    comp.htmlElementId = \"fbs-vigor-card\";\r\n    components.push(comp);\r\n}\r\n\r\nvar sakuraTokenTotalCount = 0;\r\nfunction createSakuraTokenComponent(region: sakuraba.SakuraTokenArea, count: number){\r\n    for(let i = 0; i < count; i++){\r\n        let newComp = new SakuraTokenComponent;\r\n        newComp.region = region;\r\n        newComp.indexOfRegion = i;\r\n        newComp.htmlElementId = `sakura-token-${sakuraTokenTotalCount}`;\r\n        sakuraTokenTotalCount++;\r\n        components.push(newComp);\r\n    }\r\n}\r\n\r\n// \r\nfunction updateComponents(){\r\n    // \r\n    let libraryOffset = $('.area.library.background').position();\r\n    components.filter(x => x.region === 'library').forEach((comp, i) => {\r\n        comp.left = libraryOffset.left + 4 + comp.indexOfRegion * 8;\r\n        comp.top = libraryOffset.top + 4 + comp.indexOfRegion * 3;\r\n    });\r\n\r\n    // \r\n    let handOffset = $('.area.hand.background').position();\r\n    components.filter(x => x.region === 'hand').forEach((comp, i) => {\r\n        comp.left = handOffset.left + 4 + comp.indexOfRegion * 108;\r\n        comp.top = handOffset.top + 4;\r\n    });\r\n\r\n    // \r\n    let specialOffset = $('.area.special.background').position();\r\n    components.filter(x => x.region === 'special').forEach((comp, i) => {\r\n        comp.left = specialOffset.left + 4 + comp.indexOfRegion * 108;\r\n        comp.top = specialOffset.top + 4;\r\n    });\r\n\r\n    // \r\n    let usedOffset = $('.area.used.background').position();\r\n    components.filter(x => x.region === 'used').forEach((comp, i) => {\r\n        comp.left = usedOffset.left + 4 + comp.indexOfRegion * 108;\r\n        comp.top = usedOffset.top + 4;\r\n    });\r\n\r\n    // \r\n    let hiddenUsedOffset = $('.area.hidden-used.background').position();\r\n    components.filter(x => x.region === 'hidden-used').forEach((comp, i) => {\r\n        comp.left = 20 + hiddenUsedOffset.left + 4 + comp.indexOfRegion * 8;\r\n        comp.top = -20 + hiddenUsedOffset.top + 4 + comp.indexOfRegion * 3;\r\n    });\r\n\r\n    // \r\n    let vigorOffset = $('.area.vigor').position();\r\n    components.filter(x => x instanceof VigorComponent).forEach((comp, i) => {\r\n        if(comp.rotated === 0){\r\n            comp.left = vigorOffset.left;\r\n            comp.top = vigorOffset.top + 40;\r\n        } else {\r\n            comp.left = vigorOffset.left;\r\n            comp.top = vigorOffset.top + 20;\r\n        }\r\n    });\r\n\r\n    // \r\n    let distanceOffset = $('.area.sakura-token-region.distance').position();\r\n    components.filter(x => x.region === 'distance').forEach((comp, i) => {\r\n        comp.left = distanceOffset.left + 60 + ((28 + 4) * i);\r\n        comp.top = distanceOffset.top + 2;\r\n    });\r\n\r\n    let dustOffset = $('.area.sakura-token-region.dust').position();\r\n    components.filter(x => x.region === 'dust').forEach((comp, i) => {\r\n        comp.left = dustOffset.left + 60 + ((28 + 4) * i);\r\n        comp.top = dustOffset.top + 2;\r\n    });\r\n\r\n    let auraOffset = $('.area.sakura-token-region.aura').position();\r\n    components.filter(x => x.region === 'aura').forEach((comp, i) => {\r\n        comp.left = auraOffset.left + 60 + ((28 + 4) * i);\r\n        comp.top = auraOffset.top + 2;\r\n    });\r\n\r\n    let lifeOffset = $('.area.sakura-token-region.life').position();\r\n    components.filter(x => x.region === 'life').forEach((comp, i) => {\r\n        comp.left = lifeOffset.left + 60 + ((28 + 4) * i);\r\n        comp.top = lifeOffset.top + 2;\r\n    });\r\n\r\n    let flairOffset = $('.area.sakura-token-region.flair').position();\r\n    components.filter(x => x.region === 'flair').forEach((comp, i) => {\r\n        comp.left = flairOffset.left + 60 + ((28 + 4) * i);\r\n        comp.top = flairOffset.top + 2;\r\n    });\r\n\r\n\r\n    components.filter(x => x.region === 'on-card').forEach((comp: SakuraTokenComponent, i) => {\r\n        let offset = $(`[data-card-id=${comp.cardId}]`).position();\r\n        \r\n        comp.left = offset.left + 2 + comp.indexOfRegion * 20;\r\n        comp.top = offset.top + 140 - 2 - 32;\r\n    });\r\n\r\n    // /\r\n    let boardOffset = $('#BOARD').offset();\r\n    components.forEach((component, index) => {\r\n        let $elem: JQuery = null;\r\n        if(!component.drawn){\r\n            $('#BOARD').append(component.toHtml());\r\n            $elem = $(`#${component.htmlElementId}`);\r\n        }\r\n        \r\n        if(!component.drawn || component.isLocationChanged()){\r\n            if($elem === null){\r\n                $elem = $(`#${component.htmlElementId}`);\r\n            }\r\n\r\n            updateComponentAttributes(component, $elem);\r\n\r\n            // \r\n            component.updateLocation();\r\n        }\r\n\r\n        // \r\n        if(!component.drawn){\r\n            component.drawn = true;\r\n        }\r\n    });\r\n\r\n    // \r\n    $('#LIBRARY-COUNT').text(myBoardSide.library.length).css({right: parseInt($('.area.library.background').css('right')) + 8, bottom: parseInt($('.area.library.background').css('bottom')) + 8});\r\n}\r\n\r\nfunction updateComponentAttributes(component: Component, $elem: JQuery){\r\n    // \r\n    if(component.draggable){\r\n        $elem.attr('draggable', '');\r\n    } else {\r\n        $elem.removeAttr('draggable');\r\n    }\r\n\r\n    // \r\n    $elem.removeClass(['rotated', 'reverse-rotated']);\r\n    if(component.rotated === 1){\r\n        $elem.addClass('rotated');\r\n    } else if(component.rotated === -1){\r\n        $elem.addClass('reverse-rotated');\r\n    }\r\n\r\n    // \r\n    if(component instanceof CardComponent){\r\n        // \r\n        $elem.removeClass(['open-normal', 'back-normal', 'open-special', 'back-special']);\r\n        if(component.card.data.baseType === 'normal'){\r\n            if(component.opened){\r\n                $elem.addClass('open-normal');\r\n            } else {\r\n                $elem.addClass('back-normal');\r\n            }\r\n        }\r\n        if(component.card.data.baseType === 'special'){\r\n            if(component.opened){\r\n                $elem.addClass('open-special');\r\n            } else {\r\n                $elem.addClass('back-special');\r\n            }\r\n        }\r\n\r\n        // \r\n        $elem.text(component.opened ? component.card.data.name : '');\r\n\r\n    }\r\n\r\n    // \r\n    if (component instanceof VigorComponent) {\r\n        if(myBoardSide.vigor === 0){\r\n            $elem.find('.vigor1').addClass('clickable');\r\n            $elem.find(':not(.vigor1)').removeClass('clickable');\r\n        }\r\n        if(myBoardSide.vigor === 1){\r\n            $elem.find('.vigor0, .vigor2').addClass('clickable');\r\n            $elem.find('.vigor1').removeClass('clickable');\r\n        }\r\n        if(myBoardSide.vigor === 2){\r\n            $elem.find('.vigor1').addClass('clickable');\r\n            $elem.find(':not(.vigor1)').removeClass('clickable');\r\n        }\r\n    }\r\n    //  (\r\n    $elem.css({left: component.left, top: component.top});\r\n    $elem.css({zIndex: component.zIndexOffset + component.indexOfRegion});\r\n    \r\n    // \r\n    $elem.attr('data-region', component.region);\r\n}\r\n  \r\n\r\nfunction drawLibrary(){\r\n    myBoardSide.library.forEach((card, i) => {\r\n        createCardComponent(card, 'library', i);\r\n    });\r\n}\r\n\r\nfunction drawHands(){\r\n    myBoardSide.hands.forEach((card, i) => {\r\n        createCardComponent(card, 'hand', i);\r\n    });\r\n}\r\n\r\nfunction drawSpecials(){\r\n    myBoardSide.specials.forEach((card, i) => {\r\n        createCardComponent(card, 'special', i);\r\n    });\r\n}\r\n\r\n\r\nfunction drawUsed(){\r\n    myBoardSide.used.forEach((card, i) => {\r\n        createCardComponent(card, 'used', innerWidth);\r\n    });\r\n}\r\n\r\n\r\nfunction drawHiddenUsed(){\r\n    myBoardSide.hiddenUsed.forEach((card, i) => {\r\n        createCardComponent(card, 'hidden-used', i);\r\n    });\r\n}\r\n\r\nfunction drawVigor(){\r\n    createVigorComponent();\r\n}\r\n\r\nfunction drawSakuraTokens(){\r\n    createSakuraTokenComponent('distance', 10);\r\n    createSakuraTokenComponent('aura', 3);\r\n    createSakuraTokenComponent('life', 10);\r\n}\r\n\r\nfunction appendLog(text: string){\r\n    $('#LOG-AREA').append(text).append('<br>');\r\n}\r\n\r\n// \r\nfunction moveCard(from: sakuraba.CardArea, fromIndex: number, to: sakuraba.CardArea, addToBottom: boolean = false):boolean{\r\n    console.log('move card (%s[%d] -> %s)', from, fromIndex, to);\r\n\r\n    // \r\n\r\n    // \r\n    let card: sakuraba.Card;\r\n    if(from === 'library'){\r\n        card = myBoardSide.library.splice(fromIndex, 1)[0];\r\n\r\n    }\r\n    if(from === 'hand'){\r\n        card = myBoardSide.hands.splice(fromIndex, 1)[0];\r\n    }\r\n    if(from === 'used'){\r\n        card = myBoardSide.used.splice(fromIndex, 1)[0];\r\n    }\r\n    if(from === 'hidden-used'){\r\n        card = myBoardSide.hiddenUsed.splice(fromIndex, 1)[0];\r\n    }\r\n\r\n    let toTarget: sakuraba.Card[];\r\n    if(to === 'library'){\r\n        toTarget = myBoardSide.library;\r\n    }\r\n    if(to === 'hand'){\r\n        toTarget = myBoardSide.hands;\r\n    }\r\n    if(to === 'used'){\r\n        toTarget = myBoardSide.used;\r\n    }\r\n    if(to === 'hidden-used'){\r\n        toTarget = myBoardSide.hiddenUsed;\r\n    }\r\n    if(addToBottom){\r\n        toTarget.unshift(card);\r\n    } else {\r\n        toTarget.push(card);\r\n    }\r\n\r\n    // \r\n    if(from === 'library' && to === 'hand'){\r\n        appendLog(`1  ${card.data.name}`);\r\n    } else if(from === 'hand' && to === 'used'){\r\n        appendLog(`${card.data.name}`);\r\n    } else if(from === 'hand' && to === 'hidden-used'){\r\n        appendLog(`${card.data.name}`);\r\n    } else {\r\n        let regionCaptions = {\r\n            'library': '',\r\n            'hand': '',\r\n            'used': '',\r\n            'hidden-used': '',\r\n            \r\n        };\r\n\r\n        appendLog(`${regionCaptions[from]}${card.data.name}${regionCaptions[to]}`);\r\n    }  \r\n\r\n\r\n    // \r\n    refreshCardComponentRegionInfo(from);\r\n    refreshCardComponentRegionInfo(to);\r\n\r\n    // \r\n    updateComponents();\r\n\r\n    // \r\n    return true;\r\n}\r\n\r\n\r\n// \r\nfunction refreshCardComponentRegionInfo(region: sakuraba.RegionName){\r\n    let cards: sakuraba.Card[];\r\n    if(region === 'library'){\r\n        cards = myBoardSide.library;\r\n    }\r\n    if(region === 'hand'){\r\n        cards = myBoardSide.hands;\r\n    }\r\n    if(region === 'used'){\r\n        cards = myBoardSide.used;\r\n    }\r\n    if(region === 'hidden-used'){\r\n        cards = myBoardSide.hiddenUsed;\r\n    }\r\n    if(region === 'special'){\r\n        cards = myBoardSide.specials;\r\n    }\r\n    // \r\n    cards.forEach((card, i) => {\r\n        let comp = components.find(x => x instanceof CardComponent && x.card === card) as CardComponent;\r\n        comp.region = region;\r\n        comp.indexOfRegion = i;\r\n        comp.draggable = (comp.region !== 'library' || comp.indexOfRegion === myBoardSide.library.length - 1);\r\n\r\n        // \r\n        if(region === 'hand' || region === 'used'){\r\n            comp.opened = true;\r\n        }\r\n        if(region === 'library' || region === 'hidden-used'){\r\n            comp.opened = false;\r\n        }\r\n\r\n        if(region !== 'hidden-used'){\r\n            comp.rotated = 0;\r\n        }\r\n\r\n        if(region === 'hidden-used'){\r\n            comp.rotated = 1;\r\n        }\r\n    });\r\n}\r\n\r\n// \r\nfunction refreshSakuraTokenComponentInfo(){\r\n    let allSakuraTokens = components.filter(x => x instanceof SakuraTokenComponent);\r\n    let tokenIndex = 0;\r\n\r\n    // \r\n    for(let i = 0; i < board.data.distance; i++){\r\n        let comp = allSakuraTokens[tokenIndex] as SakuraTokenComponent;\r\n        comp.region = 'distance';\r\n        comp.indexOfRegion = i;\r\n        tokenIndex++;\r\n    }\r\n\r\n    for(let i = 0; i < board.data.dust; i++){\r\n        let comp = allSakuraTokens[tokenIndex] as SakuraTokenComponent;\r\n        comp.region = 'dust';\r\n        comp.indexOfRegion = i;\r\n        tokenIndex++;\r\n    }\r\n\r\n    for(let i = 0; i < myBoardSide.aura; i++){\r\n        let comp = allSakuraTokens[tokenIndex] as SakuraTokenComponent;\r\n        comp.region = 'aura';\r\n        comp.indexOfRegion = i;\r\n        tokenIndex++;\r\n    }\r\n\r\n    for(let i = 0; i < myBoardSide.life; i++){\r\n        let comp = allSakuraTokens[tokenIndex] as SakuraTokenComponent;\r\n        comp.region = 'life';\r\n        comp.indexOfRegion = i;\r\n        tokenIndex++;\r\n    }\r\n\r\n    for(let i = 0; i < myBoardSide.flair; i++){\r\n        let comp = allSakuraTokens[tokenIndex] as SakuraTokenComponent;\r\n        comp.region = 'flair';\r\n        comp.indexOfRegion = i;\r\n        tokenIndex++;\r\n    }\r\n\r\n    for(let cardId in board.data.tokensOnCard) {\r\n        if(board.data.tokensOnCard.hasOwnProperty(cardId)) {\r\n            for(let i = 0; i < board.data.tokensOnCard[cardId]; i++){\r\n                let comp = allSakuraTokens[tokenIndex] as SakuraTokenComponent;\r\n                comp.region = 'on-card';\r\n                comp.cardId = cardId;\r\n                comp.indexOfRegion = i;\r\n                tokenIndex++;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// \r\nfunction moveSakuraToken(from: sakuraba.SakuraTokenArea, to: sakuraba.SakuraTokenArea, cardId: string, count: number = 1):boolean{\r\n    console.log('move sakura token (%s -> %s * %d)', from, to, count);\r\n\r\n    // \r\n    if(from === 'distance'){\r\n        if(board.data.distance < count) return false; // \r\n    } else if(from === 'dust'){\r\n        if(board.data.dust < count) return false; // \r\n    } else if(from === 'aura'){\r\n        if(myBoardSide.aura < count) return false; // \r\n    } else if(from === 'life'){\r\n        if(myBoardSide.life < count) return false; // \r\n    } else if(from === 'flair'){\r\n        if(myBoardSide.flair < count) return false; // \r\n    }\r\n    if(to === 'distance'){\r\n        if((board.data.distance + count) > 10) return false; // \r\n    } else if(to === 'aura'){\r\n        if((myBoardSide.aura + count) > 5) return false; // \r\n    }\r\n\r\n    // \r\n    if(from === 'distance'){\r\n        board.data.distance -= count;\r\n    } else if(from === 'dust'){\r\n        board.data.dust -= count;\r\n    } else if(from === 'aura'){\r\n        myBoardSide.aura -= count;\r\n    } else if(from === 'life'){\r\n        myBoardSide.life -= count;\r\n    } else if(from === 'flair'){\r\n        myBoardSide.flair -= count;\r\n    }\r\n\r\n    if(to === 'distance'){\r\n        board.data.distance += count;\r\n    } else if(to === 'dust'){\r\n        board.data.dust += count;\r\n    } else if(to === 'aura'){\r\n        myBoardSide.aura += count;\r\n    } else if(to === 'life'){\r\n        myBoardSide.life += count;\r\n    } else if(to === 'flair'){\r\n        myBoardSide.flair += count;\r\n    } else if(to === 'on-card'){\r\n        if(board.data.tokensOnCard[cardId] === undefined) board.data.tokensOnCard[cardId] = 0;\r\n        board.data.tokensOnCard[cardId] += count;\r\n    }\r\n    console.log(board);\r\n\r\n    // \r\n    refreshSakuraTokenComponentInfo();\r\n\r\n    // \r\n    updateComponents();\r\n\r\n    // \r\n    return true;\r\n}\r\n\r\n\r\nfunction messageModal(desc: string){\r\n    $('#MESSAGE-MODAL .description').html(desc);\r\n    $('#MESSAGE-MODAL')\r\n        .modal({closable: false})\r\n        .modal('show');\r\n}\r\n\r\nfunction confirmModal(desc: string, yesCallback: (this: JQuery, $element: JQuery) => false | void){\r\n    $('#CONFIRM-MODAL .description').html(desc);\r\n    $('#CONFIRM-MODAL')\r\n        .modal({closable: false, onApprove:yesCallback})\r\n        .modal('show');\r\n}\r\n\r\nfunction userInputModal(desc: string, decideCallback: (this: JQuery, $element: JQuery) => false | void){\r\n    $('#INPUT-MODAL .description-body').html(desc);\r\n    $('#INPUT-MODAL')\r\n        .modal({closable: false, onApprove:decideCallback})\r\n        .modal('show');\r\n}\r\n\r\n// /**\r\n//  * \r\n//  */\r\n// function checkGameStartable(board: sakuraba.Board){\r\n//     // \r\n//     if(board.data.p1Side.playerName !== null && board.data.p2Side.playerName !== null){\r\n//         $('#GAME-START-BUTTON').removeClass('disabled');\r\n//     }\r\n// }\r\n\r\nfunction setPopup(){\r\n    // \r\n    $('[data-html],[data-content]').popup({\r\n        delay: {show: 500, hide: 0},\r\n        onShow: function(): false | void{\r\n            if(draggingFrom !== null) return false;\r\n        },\r\n    });\r\n}\r\n\r\n$(function(){\r\n\r\n    // socket.io\r\n    const socket = io();\r\n\r\n    socket.on('info', (message) => {\r\n        console.log('[SOCKET.IO INFO] ', message);\r\n    });\r\n    \r\n\r\n    // \r\n    console.log('request_first_board_to_server');\r\n    socket.emit('request_first_board_to_server', {boardId: params.boardId, side: params.side});\r\n    //socket.emit('send_board_to_server', {boardId: params.boardId, side: params.side, board: board});\r\n\r\n    // \r\n    socket.on('send_first_board_to_client', (receivingBoardData) => {\r\n        $('#P1-NAME').text(receivingBoardData.p1Side.playerName);\r\n        $('#P2-NAME').text(receivingBoardData.p2Side.playerName);\r\n\r\n        console.log('receive board: ', receivingBoardData);\r\n        board = new sakuraba.Board(receivingBoardData);\r\n        myBoardSide = board.getMySide(params.side);\r\n        let opponentSide = board.getOpponentSide(params.side);\r\n\r\n        // \r\n        if(myBoardSide.playerName === null){\r\n            let playerCommonName = (params.side === 'p1' ? '1' : '2');\r\n            let opponentPlayerCommonName = (params.side === 'p1' ? '2' : '1');\r\n            userInputModal(`<p><br>${playerCommonName}</p><p></p>`, ($elem) => {\r\n                let playerName = $('#INPUT-MODAL input').val() as string;\r\n                if(playerName === ''){\r\n                    playerName = playerCommonName;\r\n                }\r\n                socket.emit('player_name_input', {boardId: params.boardId, side: params.side, name: playerName});\r\n                myBoardSide.playerName = playerName;\r\n                $((params.side === 'p1' ? '#P1-NAME' : '#P2-NAME')).text(playerName);\r\n\r\n                messageModal(`<p></p>`);\r\n            });\r\n        }\r\n\r\n        // \r\n        if(myBoardSide.megamis !== null){\r\n            $('#MEGAMI-SELECT-BUTTON').text('');\r\n            $('#DECK-BUILD-BUTTON').removeClass('disabled');\r\n        }\r\n\r\n        // \r\n        if(myBoardSide.library.length >= 1){\r\n\r\n            drawLibrary();\r\n            refreshCardComponentRegionInfo('library');\r\n            drawSpecials();\r\n            refreshCardComponentRegionInfo('special');\r\n            updateComponents();\r\n\r\n            // \r\n            setPopup();\r\n\r\n            \r\n            $('#DECK-BUILD-BUTTON').text('');\r\n            $('#HAND-SET-BUTTON').removeClass('disabled');\r\n        }\r\n    });\r\n\r\n    // \r\n    socket.on('on_player_name_input', (receivingBoardData: sakuraba.BoardData) => {\r\n        let board = new sakuraba.Board(receivingBoardData);\r\n        $('#P1-NAME').text(board.data.p1Side.playerName);\r\n        $('#P2-NAME').text(board.data.p2Side.playerName);\r\n    });\r\n\r\n    // // \r\n    // let values: {name: string, value: string}[] = [];\r\n    // for(let key in sakuraba.MEGAMI_DATA){\r\n    //     let data = sakuraba.MEGAMI_DATA[key];\r\n    //     values.push({name: `${data.name} (${data.symbol})`, value: key});\r\n    // }\r\n    \r\n    // $('#MEGAMI1-SELECTION').dropdown({\r\n    //     placeholder: '1...',\r\n    //     values: values\r\n    // });\r\n    // $('#MEGAMI2-SELECTION').dropdown({\r\n    //     placeholder: '2...',\r\n    //     values: values\r\n    // });\r\n    for(let key in sakuraba.MEGAMI_DATA){\r\n        let data = sakuraba.MEGAMI_DATA[key];\r\n        $('#MEGAMI1-SELECTION').append(`<option value='${key}'>${data.name} (${data.symbol})</option>`);\r\n        $('#MEGAMI2-SELECTION').append(`<option value='${key}'>${data.name} (${data.symbol})</option>`);\r\n    }\r\n    $('#MEGAMI1-SELECTION').val('kururu');\r\n\r\n    // \r\n    function updateMegamiSelectModalView(){\r\n        let megami1 = $('#MEGAMI1-SELECTION').val() as string;\r\n        let megami2 = $('#MEGAMI2-SELECTION').val() as string;\r\n\r\n        if(megami1 !== '' && megami2 !== ''){\r\n            $('#MEGAMI-SELECT-MODAL .positive.button').removeClass('disabled');\r\n        } else {\r\n            $('#MEGAMI-SELECT-MODAL .positive.button').addClass('disabled');\r\n        }\r\n    }\r\n\r\n    // \r\n    $('#MEGAMI-SELECT-BUTTON').click((e) => {\r\n        let megami2Rule: SemanticUI.Form.Field = {identifier: 'megami2', rules: [{type: 'different[megami1]', prompt: ''}]};\r\n        $('#MEGAMI-SELECT-MODAL .ui.form').form({\r\n            fields: {\r\n                megami2: megami2Rule\r\n            }\r\n        });\r\n        $('#MEGAMI-SELECT-MODAL').modal({closable: false, autofocus: false, onShow: function(){\r\n            // \r\n            if(myBoardSide.megamis !== null){\r\n                $('#MEGAMI1-SELECTION').val(myBoardSide.megamis[0]);\r\n                $('#MEGAMI2-SELECTION').val(myBoardSide.megamis[1]);\r\n            }\r\n\r\n            // \r\n            updateMegamiSelectModalView();\r\n\r\n        }, onApprove:function(){\r\n            if(!$('#MEGAMI-SELECT-MODAL .ui.form').form('validate form')){\r\n                return false;\r\n            }\r\n            \r\n            $('#DECK-BUILD-BUTTON').removeClass('disabled');\r\n\r\n            // \r\n            let megamis = [$('#MEGAMI1-SELECTION').val() as sakuraba.Megami, $('#MEGAMI2-SELECTION').val() as sakuraba.Megami];\r\n            let mySide = board.getMySide(params.side);\r\n            mySide.megamis = megamis;\r\n    \r\n            // socket.io\r\n            socket.emit('megami_select', {boardId: params.boardId, side: params.side, megamis: megamis});\r\n            return undefined;\r\n        }}).modal('show');\r\n    });\r\n\r\n    $('#MEGAMI1-SELECTION, #MEGAMI2-SELECTION').on('change', function(e){\r\n        updateMegamiSelectModalView();\r\n    });\r\n\r\n    // \r\n    function updateDeckCounts(){\r\n        let normalCardCount = $('#DECK-BUILD-MODAL .fbs-card.open-normal.selected').length;\r\n        let specialCardCount = $('#DECK-BUILD-MODAL .fbs-card.open-special.selected').length;\r\n\r\n        let normalColor = (normalCardCount > 7 ? 'red' : (normalCardCount < 7 ? 'blue' : 'black'));\r\n        $('#DECK-NORMAL-CARD-COUNT').text(normalCardCount).css({color: normalColor, fontWeight: (normalColor === 'black' ? 'normal' : 'bold')});\r\n        let specialColor = (specialCardCount > 3 ? 'red' : (specialCardCount < 3 ? 'blue' : 'black'));\r\n        $('#DECK-SPECIAL-CARD-COUNT').text(specialCardCount).css({color: specialColor, fontWeight: (specialColor === 'black' ? 'normal' : 'bold')});\r\n\r\n        if(normalCardCount === 7 && specialCardCount === 3){\r\n            $('#DECK-BUILD-MODAL .positive.button').removeClass('disabled');\r\n        } else {\r\n            $('#DECK-BUILD-MODAL .positive.button').addClass('disabled');\r\n        }\r\n    }\r\n\r\n    // \r\n    $('body').on('click', '#DECK-BUILD-MODAL .fbs-card', function(e){\r\n        // \r\n        $(this).toggleClass('selected');\r\n\r\n        // \r\n        updateDeckCounts();\r\n    });\r\n\r\n    // \r\n    $('#DECK-BUILD-BUTTON').click((e) => {\r\n        let cardIds: string[][] = [[], [], []];\r\n\r\n        // 1  2   \r\n        for(let key in sakuraba.CARD_DATA){\r\n            let data = sakuraba.CARD_DATA[key];\r\n            if(data.megami === myBoardSide.megamis[0] && data.baseType === 'normal'){\r\n                cardIds[0].push(key);\r\n            }\r\n            if(data.megami === myBoardSide.megamis[1] && data.baseType === 'normal'){\r\n                cardIds[1].push(key);\r\n            }\r\n            if(myBoardSide.megamis.indexOf(data.megami) >= 0 && data.baseType === 'special'){\r\n                cardIds[2].push(key);\r\n            }\r\n        }\r\n        \r\n        cardIds.forEach((cardIdsInRow, r) => {\r\n            cardIdsInRow.forEach((cardId, c) => {\r\n                \r\n                let card = new sakuraba.Card(cardId);\r\n                let comp = new CardComponent();\r\n                comp.card = card;\r\n                comp.htmlElementId = `deck-${card.id}`;\r\n                comp.opened = true;\r\n                comp.top = 4 + r * (160 + 8);\r\n                comp.left = 4 + c * (100 + 8);\r\n                \r\n                $('#DECK-BUILD-CARD-AREA').append(comp.toHtml());\r\n                \r\n                updateComponentAttributes(comp, $(`#${comp.htmlElementId}`));\r\n            });\r\n        });\r\n\r\n        let settings: SemanticUI.ModalSettings = {\r\n            closable: false, autofocus: false, onShow: function () {\r\n                // \r\n                updateDeckCounts();\r\n\r\n                // \r\n                setPopup();\r\n            },\r\n            onApprove: function () {\r\n                // \r\n                let normalCards: any = $('#DECK-BUILD-MODAL .fbs-card.open-normal.selected').map((i, elem) => new sakuraba.Card($(elem).attr('data-card-id'))).get();\r\n                myBoardSide.library = normalCards as sakuraba.Card[];\r\n                let specialCards: any = $('#DECK-BUILD-MODAL .fbs-card.open-special.selected').map((i, elem) => new sakuraba.Card($(elem).attr('data-card-id'))).get();\r\n                myBoardSide.specials = specialCards as sakuraba.Card[];\r\n                console.log(myBoardSide);\r\n\r\n                drawLibrary();\r\n                refreshCardComponentRegionInfo('library');\r\n                drawSpecials();\r\n                refreshCardComponentRegionInfo('special');\r\n                updateComponents();\r\n\r\n                // \r\n                setPopup();\r\n\r\n                // \r\n                $('#HAND-SET-BUTTON').removeClass('disabled');\r\n\r\n                // socket.io\r\n                socket.emit('deck_build', {boardId: params.boardId, side: params.side, library: myBoardSide.library, specials: myBoardSide.specials});\r\n                \r\n            },\r\n            onHide: function () {\r\n                // \r\n                $('#DECK-BUILD-CARD-AREA').empty();\r\n            }\r\n        }\r\n        $('#DECK-BUILD-MODAL').modal(settings).modal('show');\r\n    });\r\n\r\n    // \r\n    $('#HAND-SET-BUTTON').on('click', function(){\r\n        confirmModal('<br>', () => {\r\n        });\r\n    });\r\n\r\n    // \r\n    $('#BOARD').on('dragstart', '.fbs-card,.sakura-token', function(e){\r\n        this.style.opacity = '0.4';  // this / e.target is the source node.\r\n        //(e.originalEvent as DragEvent).dataTransfer.setDragImage($(this.closest('.draw-region'))[0], 0, 0);\r\n        let id = $(this).attr('id');\r\n        let comp = components.find(c => c.htmlElementId === id);\r\n\r\n        // \r\n        if(comp.region === 'hand'){\r\n            // \r\n            $('.area.droppable:not(.hand)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n        }\r\n\r\n        if(comp.region === 'library'){\r\n            // \r\n            $('.area.droppable:not(.library)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n        }\r\n\r\n        if(comp.region === 'used'){\r\n            // \r\n            $('.area.droppable:not(.used)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n        }\r\n\r\n        if(comp.region === 'hidden-used'){\r\n            // \r\n            $('.area.droppable:not(.hidden-used)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n        }\r\n\r\n        if(comp.region === 'distance'){\r\n            // \r\n            $('.area.sakura-token-region.droppable:not(.distance)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n        }\r\n        if(comp.region === 'dust'){\r\n            // \r\n            $('.area.sakura-token-region.droppable:not(.dust)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n        }\r\n        if(comp.region === 'aura'){\r\n            // \r\n            $('.area.sakura-token-region.droppable:not(.aura)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n\r\n            // \r\n            $('[data-region=used]').addClass('droppable');\r\n        }\r\n\r\n        if(comp.region === 'life'){\r\n            // \r\n            $('.area.sakura-token-region.droppable:not(.life)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n        }\r\n\r\n        if(comp.region === 'flair'){\r\n            // \r\n            $('.area.sakura-token-region.droppable:not(.flair)').css('z-index', 9999);\r\n            draggingFrom = comp;\r\n        }\r\n\r\n        console.log('draggingFrom: ', draggingFrom);\r\n\r\n        $('.fbs-card').popup('hide all');\r\n\r\n    });\r\n\r\n    function processOnDragEnd(){\r\n        // \r\n        if(!contextMenuShowingAfterDrop){\r\n            $('[draggable]').css('opacity', '1.0');\r\n            $('.area,.fbs-card').removeClass('over');\r\n        }\r\n        \r\n        $('.area.droppable').css('z-index', -9999);\r\n        draggingFrom = null;\r\n    }\r\n\r\n    $('#BOARD').on('dragend', '.fbs-card,.sakura-token', function(e){\r\n        console.log('dragend', this);\r\n        processOnDragEnd();\r\n\r\n    });\r\n    $('#BOARD').on('dragover', '.droppable', function(e){\r\n        if (e.preventDefault) {\r\n            e.preventDefault(); // Necessary. Allows us to drop.\r\n        }\r\n        //e.dataTransfer.dropEffect = 'move';  // See the section on the DataTransfer object.\r\n\r\n        return false;\r\n    });\r\n\r\n    // \r\n    $('.area.droppable').on('dragenter', function(e){\r\n        console.log('dragenter', this);\r\n        $($(this).attr('data-background-selector')).addClass('over');\r\n    });\r\n\r\n    $('.area.droppable').on('dragleave', function(e){\r\n        console.log('dragleave', this);\r\n        $($(this).attr('data-background-selector')).removeClass('over');  // this / e.target is previous target element.\r\n    });\r\n    $('#BOARD').on('dragenter', '.fbs-card.droppable', function(e){\r\n        $($(this)).addClass('over');\r\n    });\r\n    $('#BOARD').on('dragleave', '.fbs-card.droppable', function(e){\r\n        $($(this)).removeClass('over');  // this / e.target is previous target element.\r\n    });\r\n\r\n\r\n    let lastDraggingFrom: Component; \r\n    $('#BOARD').on('drop', '.area,.fbs-card.droppable', function(e){\r\n        // this / e.target is current target element.\r\n        console.log('drop', this);\r\n        let $this = $(this);\r\n\r\n        if (e.stopPropagation) {\r\n            e.stopPropagation(); // stops the browser from redirecting.\r\n        }\r\n    \r\n        // \r\n        let to: sakuraba.RegionName;\r\n        if($this.is('.area.hand')) to = 'hand';\r\n        if($this.is('.area.used')) to = 'used';\r\n        if($this.is('.area.hidden-used')) to = 'hidden-used';\r\n        if($this.is('.area.library')) to = 'library';\r\n        if($this.is('.area.distance')) to = 'distance';\r\n        if($this.is('.area.dust')) to = 'dust';\r\n        if($this.is('.area.aura')) to = 'aura';\r\n        if($this.is('.area.life')) to = 'life';\r\n        if($this.is('.area.flair')) to = 'flair';\r\n        if($this.is('.fbs-card')) to = 'on-card';\r\n\r\n        if(draggingFrom !== null){\r\n            // \r\n            if(to === 'library'){\r\n                lastDraggingFrom = draggingFrom;\r\n                contextMenuShowingAfterDrop = true;\r\n                $('#CONTEXT-DRAG-TO-LIBRARY').contextMenu({x: e.pageX, y: e.pageY});\r\n                return false;\r\n            } else {\r\n                // \r\n                if(draggingFrom instanceof CardComponent){\r\n                    moveCard(draggingFrom.region as sakuraba.CardArea, draggingFrom.indexOfRegion, to as sakuraba.CardArea);\r\n                    return false;\r\n                }\r\n\r\n                if(draggingFrom instanceof SakuraTokenComponent){\r\n                    let cardId: string = null;\r\n                    if(to === 'on-card'){\r\n                        cardId = $(this).attr('data-card-id');\r\n                    }\r\n                    moveSakuraToken(draggingFrom.region as sakuraba.SakuraTokenArea, to as sakuraba.SakuraTokenArea, cardId);\r\n                    return false;\r\n                }\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n        return false;\r\n    });\r\n\r\n    // \r\n    function vigorProcess(){\r\n        let vigComp = components.find(x => x instanceof VigorComponent) as VigorComponent;\r\n        vigComp.setVigor(myBoardSide.vigor);\r\n        updateComponents();\r\n    }\r\n    $('#BOARD').on('click', '.fbs-vigor-card .vigor0.clickable', function(e){\r\n        e.preventDefault();\r\n        appendLog(`1(0)`)\r\n        myBoardSide.vigor = 0;\r\n        vigorProcess();\r\n\r\n        return false;\r\n    });\r\n    $('#BOARD').on('click', '.fbs-vigor-card .vigor1.clickable', function(e){\r\n        e.preventDefault();\r\n        if(myBoardSide.vigor === 2){\r\n            appendLog(`1(1)`);\r\n        } else {\r\n            appendLog(`1(1)`);\r\n        }\r\n        myBoardSide.vigor = 1;\r\n        vigorProcess();\r\n\r\n        return false;\r\n    });\r\n    $('#BOARD').on('click', '.fbs-vigor-card .vigor2.clickable', function(e){\r\n        e.preventDefault();\r\n        appendLog(`1(2)`)\r\n        myBoardSide.vigor = 2;\r\n        vigorProcess();\r\n\r\n        return false;\r\n    });\r\n\r\n    // \r\n    $('#LOG-DISPLAY-BUTTTON').on('click', function(e){\r\n        $('#LOG-WINDOW').toggle();\r\n    });\r\n\r\n    // \r\n    $('#TURN-END-BUTTON').on('click', function(){\r\n        $('.ui.modal').modal('show');\r\n    });\r\n\r\n    // \r\n    $('#BOARD').on('dblclick', '.fbs-card[data-region=special]', function(e){\r\n        e.preventDefault();\r\n        let cardIndex = $('.fbs-card[data-region=special]').index(this);\r\n        console.log('double click', cardIndex);\r\n\r\n        let card = myBoardSide.specials[cardIndex];\r\n        let comp = components.find(x => x instanceof CardComponent && x.card === myBoardSide.specials[cardIndex]) as CardComponent;\r\n\r\n        if(card.used){\r\n            card.used = false;\r\n            comp.opened = false;\r\n        } else {\r\n            card.used = true;\r\n            comp.opened = true;\r\n        }\r\n\r\n        updateComponents();\r\n        \r\n\r\n        return false;\r\n    });\r\n\r\n    // $('#BOARD').on('mouseenter', '.sakura-token', function(e){\r\n    //     let $region = $(this).closest('.draw-region');\r\n\r\n    //     // \r\n    //     let index = $region.find('.sakura-token').index(this);\r\n\r\n    //     // \r\n    //     $region.find(`.sakura-token:gt(${index})`).css({opacity: 0.4});\r\n    // });\r\n    // $('#BOARD').on('mouseleave', '.sakura-token', function(e){\r\n    //     let $region = $(this).closest('.draw-region');\r\n    //     $region.find(`.sakura-token`).css({opacity: 1});\r\n    // });\r\n\r\n    // \r\n    $('#BOARD').append('<div id=\"CONTEXT-DRAG-TO-LIBRARY\"></div>');\r\n    $.contextMenu({\r\n        trigger: 'hidden',\r\n        selector: '#CONTEXT-DRAG-TO-LIBRARY',\r\n        callback: function(key: string) {\r\n            if(key === 'top'){\r\n                moveCard('hand', lastDraggingFrom.indexOfRegion, 'library');\r\n            }\r\n            if(key === 'bottom'){\r\n                moveCard('hand', lastDraggingFrom.indexOfRegion, 'library', true);\r\n            }\r\n        },\r\n        events: {\r\n            hide: function(options){\r\n                contextMenuShowingAfterDrop = false;\r\n                console.log(options);\r\n                processOnDragEnd();\r\n            }\r\n        },\r\n        items: {\r\n            'top': {name: ''},\r\n            'bottom': {name: ''},\r\n            'sep': '----',\r\n            'cancel': {name: ''}\r\n        }\r\n    });\r\n    // \r\n    $.contextMenu({\r\n        selector: '#BOARD .fbs-card[data-region=library]',\r\n        callback: function(key: string) {\r\n            if(key === 'draw'){\r\n                moveCard('library', 0, 'hand');\r\n            }\r\n            if(key === 'reshuffle' || key === 'reshuffleWithoutDamage'){\r\n                // \r\n                myBoardSide.library = myBoardSide.library.concat(myBoardSide.hiddenUsed.splice(0)); \r\n                myBoardSide.used.forEach(function(card, i){\r\n                    if(card.sakuraToken === undefined || card.sakuraToken === 0){\r\n                        myBoardSide.library.push(card);\r\n                        myBoardSide.used[i] = undefined;\r\n                    }\r\n                });\r\n                myBoardSide.used = myBoardSide.used.filter((c) => c !== undefined);\r\n                myBoardSide.library = shuffle(myBoardSide.library);\r\n\r\n                refreshCardComponentRegionInfo('library');\r\n                refreshCardComponentRegionInfo('used');\r\n                refreshCardComponentRegionInfo('hidden-used');\r\n\r\n\r\n                if(key === 'reshuffle') moveSakuraToken('life', 'dust', null);\r\n                updateComponents();\r\n                appendLog(``);\r\n            }\r\n        },\r\n        items: {\r\n            'draw': {name: '1', disabled: () => myBoardSide.library.length === 0},\r\n            'sep1': '---------',\r\n            'reshuffle': {name: '', disabled: () => myBoardSide.life === 0},\r\n            'reshuffleWithoutDamage': {name: ' ()'},\r\n        }\r\n    });\r\n\r\n    // \r\n    $.contextMenu({\r\n        selector: '#BOARD .fbs-vigor-card',\r\n        callback: function(key: string) {\r\n        },\r\n        items: {\r\n            'wither': {name: ''},\r\n            'sep1': '---------',\r\n            'cancel': {name: ''},\r\n        }\r\n    });\r\n    // \r\n    $.contextMenu({\r\n        selector: '#BOARD .sakura-token',\r\n        build: function($elem: JQuery, event: JQueryEventObject){\r\n            // \r\n            let region = $elem.attr('data-region') as sakuraba.SakuraTokenArea;\r\n            let tokenCount = 0;\r\n            if(region === 'distance'){\r\n                tokenCount = board.data.distance;\r\n            }\r\n            if(region === 'dust'){\r\n                tokenCount = board.data.dust;\r\n            }\r\n            if(region === 'aura'){\r\n                tokenCount = myBoardSide.aura;\r\n            }\r\n            if(region === 'life'){\r\n                tokenCount = myBoardSide.life;\r\n            }\r\n            if(region === 'flair'){\r\n                tokenCount = myBoardSide.flair;\r\n            }\r\n\r\n            let items = {};\r\n            let itemBaseData = [\r\n                {key: 'moveToDistance', name: '', region: 'distance'},\r\n                {key: 'moveToDust', name: '', region: 'dust'},\r\n                {key: 'moveToAura', name: '', region: 'aura'},\r\n                {key: 'moveToLife', name: '', region: 'life'},\r\n                {key: 'moveToFlair', name: '', region: 'flair'},\r\n            ];\r\n            itemBaseData.forEach((data) => {\r\n                if(region === data.region) return true;\r\n\r\n                items[data.key] = {name: data.name, items: {}};\r\n                for(let i = 1; i <= tokenCount; i++){\r\n                    items[data.key].items[i.toString()] = {name: `${i}`};\r\n                }\r\n                return true;\r\n            });\r\n            items['sep1'] =  '---------';\r\n            items['cancel'] =  {name: ''};\r\n\r\n            \r\n            return {\r\n                callback: function(key: string) {\r\n                },\r\n                items: items,\r\n            }\r\n            \r\n\r\n\r\n            // return {\r\n            //     callback: function(key: string) {\r\n            //     },\r\n            //     items: {\r\n            //         'move': {\r\n            //             name: '',\r\n            //             items: {\r\n            //                 'dust': {\r\n            //                     name: '',\r\n            //                     items: {\r\n            //                         '1': {name: '1'},\r\n            //                         '2': {name: '2'},\r\n            //                         '3': {name: '3'},\r\n            //                     }\r\n            //                 }\r\n            //             }\r\n            //         },\r\n            //         'sep1': '---------',\r\n            //         'cancel': {name: ''},\r\n            //     }\r\n            // }\r\n    \r\n        },\r\n    });\r\n\r\n\r\n    // context.init({ above: 'auto' });\r\n    // context.attach('.area.library .fbs-card', [\r\n    //     { text: '1', action: (e) => moveLibraryToHands(0) }\r\n    //     , { divider: true }\r\n    //     , { text: '' }\r\n    //     , { text: ' ()' }\r\n    // ]);\r\n\r\n    // context.attach('.area.hand .fbs-card', [\r\n    //     { text: '' }\r\n    //     , { text: '' }\r\n    //     , { divider: true }\r\n    //     , { text: ' ' }\r\n    //     , { text: ' ()' }\r\n    // ]);\r\n\r\n    // context.attach('.area.distance .sakura-token', [\r\n    //     { text: '  ()', action: (e) => {e.preventDefault(); moveSakuraToken('distance', 'aura'); return true;} }\r\n    //     , { divider: true }\r\n    //     , { text: ' ' }\r\n    //     , { text: ' ' }\r\n    //     , { text: ' ' }\r\n    // ]);\r\n\r\n    // context.attach('.area.dust .sakura-token', [\r\n    //     { text: '  ()', action: (e) => {e.preventDefault(); moveSakuraToken('dust', 'aura'); return true;} }\r\n    //     , { text: '  ()', action: (e) => {e.preventDefault(); moveSakuraToken('life', 'aura'); return true;} }\r\n    //     , { divider: true }\r\n    //     , { text: ' ', action: (e) => {e.preventDefault(); moveSakuraToken('life', 'aura'); return true;} }\r\n    //     , { text: ' ' }\r\n    //     , { text: ' ' }\r\n    // ]);\r\n\r\n    // context.attach('.area.aura .sakura-token', [\r\n    //     { text: '  ()'}\r\n    //     , { text: '  ()', action: (e) => {e.preventDefault(); moveSakuraToken('aura', 'flair'); return true;}}\r\n    //     , { divider: true }\r\n    //     , { text: ' ', action: (e) => {e.preventDefault(); moveSakuraToken('aura', 'life'); return true;} }\r\n    //     , { text: ' ' }\r\n    //     , { divider: true }\r\n    //     , { text: '' }\r\n    // ]);\r\n\r\n    // context.attach('.area.life .sakura-token', [\r\n    //     { text: '  ()', action: (e) => {e.preventDefault(); moveSakuraToken('life', 'flair'); return true;} }\r\n    //     , { divider: true }\r\n    //     , { text: ' ', action: (e) => {e.preventDefault(); moveSakuraToken('life', 'aura'); return true;} }\r\n    //     , { text: ' ' }\r\n    //     , { text: ' ' }\r\n    // ]);\r\n\r\n    // context.attach('.area.flair .sakura-token', [\r\n    //     { text: '  ()' }\r\n    //     , { divider: true }\r\n    //     , { text: ' ', action: (e) => {e.preventDefault(); moveSakuraToken('flair', 'aura'); return true;} }\r\n    //     , { text: ' ', action: (e) => {e.preventDefault(); moveSakuraToken('flair', 'life'); return true;} }\r\n    //     , { text: ' ' }\r\n    // ]);\r\n\r\n  ;\r\n});","// \r\nexport type SakuraTokenArea = \"aura\" | \"life\" | \"flair\" | \"distance\" | \"dust\" | \"on-card\";\r\nexport type CardArea = \"library\" | \"hand\" | \"used\" | \"hidden-used\" | \"special\";\r\nexport type RegionName = SakuraTokenArea | CardArea | \"vigor\";\r\nexport type CardType = \"attack\" | \"reaction\" | \"action\" | \"fullpower\" | \"enhance\";\r\nexport type CardBaseType = 'normal' | 'special';\r\nexport type Side = 'p1' | 'p2' | 'watch';\r\n\r\n// \r\ninterface MegamiDataItem {\r\n    name: string;\r\n    symbol: string;\r\n}\r\nexport const MEGAMI_DATA = {\r\n      'yurina': {name: '', symbol: ''}\r\n    , 'saine': {name: '', symbol: ''}\r\n    , 'himika': {name: '', symbol: ''}\r\n    , 'tokoyo': {name: '', symbol: ''}\r\n    , 'oboro': {name: '', symbol: ''}\r\n    , 'yukihi': {name: '', symbol: '/'}\r\n    , 'shinra': {name: '', symbol: ''}\r\n    , 'hagane': {name: '', symbol: ''}\r\n    , 'chikage': {name: '', symbol: ''}\r\n    , 'kururu': {name: '', symbol: ''}\r\n    , 'thallya': {name: '', symbol: ''}\r\n    , 'raira': {name: '', symbol: ''}\r\n};\r\nexport type Megami = keyof (typeof MEGAMI_DATA);\r\n\r\n// \r\ninterface CardDataItem {\r\n    megami: Megami;\r\n    name: string;\r\n    ruby?: string;\r\n    baseType: CardBaseType;\r\n    types: CardType[];\r\n    range?: string;\r\n    damage?: string;\r\n    capacity?: string;\r\n    cost?: string;\r\n    text: string;\r\n}\r\nexport const CARD_DATA: {[key: string]: CardDataItem} = {\r\n      '01-yurina-o-n-1': {megami: 'yurina', name: '', ruby: '', baseType: 'normal', types: ['attack'], range: \"3-4\", damage: '3/1', text: ''}\r\n    , '01-yurina-o-n-2': {megami: 'yurina', name: '', ruby: '', baseType: 'normal', types: ['attack'], range: \"3\", damage: '2/2', text: '-3+1/+0'}\r\n    , '01-yurina-o-n-3': {megami: 'yurina', name: '', ruby: '', baseType: 'normal', types: ['attack'], range: \"1-2\", damage: '2/1', text: '-3+1/+0'}\r\n    , '01-yurina-o-n-4': {megami: 'yurina', name: '', ruby: '', baseType: 'normal', types: ['attack', 'fullpower'], range: \"3-4\", damage: '4/3', text: ''}\r\n    , '01-yurina-o-n-5': {megami: 'yurina', name: '', ruby: '', baseType: 'normal', types: ['action'], text: '42'}\r\n    , '01-yurina-o-n-6': {megami: 'yurina', name: '', ruby: '', baseType: 'normal', types: ['enhance'], capacity: '4', text: '\\n1-43/-'}\r\n    , '01-yurina-o-n-7': {megami: 'yurina', name: '', ruby: '', baseType: 'normal', types: ['enhance', 'fullpower'], capacity: '2', text: '-3+1/+1'}\r\n    , '01-yurina-o-s-1': {megami: 'yurina', name: '', ruby: '', baseType: 'special', cost: '7', types: ['attack'], range: '3-4', damage: '4/4', text: ''}\r\n    , '01-yurina-o-s-2': {megami: 'yurina', name: '', ruby: '', baseType: 'special', cost: '3', types: ['attack', 'reaction'], range: '0-10', damage: '2/-', text: '-2/+0'}\r\n    , '01-yurina-o-s-3': {megami: 'yurina', name: '', ruby: '', baseType: 'special', cost: '3', types: ['action'], text: '5 \\n-3'}\r\n    , '01-yurina-o-s-4': {megami: 'yurina', name: '', ruby: '', baseType: 'special', cost: '5', types: ['attack', 'fullpower'], range: '1-4', damage: '5/5', text: '-3'}\r\n\r\n\r\n    , '02-saine-o-n-1': {megami: 'saine', name: '', ruby: '', baseType: 'normal', types: ['attack'], range: \"4-5\", damage: '2/1', text: '-04-52/1'}\r\n    , '02-saine-o-n-2': {megami: 'saine', name: '', ruby: '', baseType: 'normal', types: ['attack', 'reaction'], range: \"4-5\", damage: '3/1', text: ''}\r\n    , '02-saine-o-n-3': {megami: 'saine', name: '', ruby: '', baseType: 'normal', types: ['attack'], range: \"3-5\", damage: '1/1', text: '3-52/1'}\r\n    , '02-saine-o-n-4': {megami: 'saine', name: '', ruby: '', baseType: 'normal', types: ['action'], text: '-0\\n1'}\r\n    , '02-saine-o-n-5': {megami: 'saine', name: '', ruby: '', baseType: 'normal', types: ['enhance'], capacity: '3', text: '1\\n2'}\r\n    , '02-saine-o-n-6': {megami: 'saine', name: '', ruby: '', baseType: 'normal', types: ['enhance', 'reaction'], capacity: '1', text: '-1/+0 \\n0-101/-'}\r\n    , '02-saine-o-n-7': {megami: 'saine', name: '', ruby: '', baseType: 'normal', types: ['enhance', 'fullpower'], capacity: '5', text: ''}\r\n    , '02-saine-o-s-1': {megami: 'saine', name: '', ruby: '', baseType: 'special', cost: '5', types: ['action'], range: '3-4', damage: '4/4', text: '3-41/1\\n4-51/1\\n3-52/2'}\r\n    , '02-saine-o-s-2': {megami: 'saine', name: '', ruby: '', baseType: 'special', cost: '1', types: ['action'], text: '53'}\r\n    , '02-saine-o-s-3': {megami: 'saine', name: '', ruby: '', baseType: 'special', cost: '1', types: ['action', 'reaction'], text: '-1/-1\\n-0'}\r\n    , '02-saine-o-s-4': {megami: 'saine', name: '', ruby: '', baseType: 'special', cost: '4', types: ['attack', 'reaction'], range: '1-5', damage: '5/5', text: ''}\r\n};\r\n\r\n// \r\nexport class Board {\r\n    data: BoardData;\r\n\r\n    constructor(data?: BoardData){\r\n        if(data !== undefined){\r\n            this.data = data;\r\n        } else {\r\n            this.data = new BoardData();\r\n        }\r\n    }\r\n\r\n    getMySide(side: Side){\r\n        if(side === 'p1'){\r\n            return this.data.p1Side;\r\n        } else if(side === 'p2'){\r\n            return this.data.p2Side;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getOpponentSide(side: Side){\r\n        if(side === 'p1'){\r\n            return this.data.p2Side;\r\n        } else if(side === 'p2'){\r\n            return this.data.p1Side;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nexport class BoardData {\r\n    dataVersion = 1;\r\n\r\n    distance: number = 10;\r\n    dust: number = 0;\r\n    tokensOnCard: {[cardId: string]: number} = {};\r\n\r\n    actionLog: LogRecord[] = [];\r\n    chatLog: LogRecord[] = [];\r\n\r\n    p1Side: BoardSide;\r\n    p2Side: BoardSide;\r\n\r\n    constructor(){\r\n        this.p1Side = new BoardSide();\r\n        this.p2Side = new BoardSide();\r\n    }\r\n}\r\n\r\nexport class BoardSide {\r\n    playerName: string = null;\r\n\r\n    megamis: Megami[] = null;\r\n\r\n    aura: number = 3;\r\n    life: number = 10;\r\n    flair: number = 0;\r\n\r\n    vigor: number = 0;\r\n\r\n    library: Card[] = [];\r\n    hands: Card[] = [];\r\n    used: Card[] = [];\r\n    hiddenUsed: Card[] = [];\r\n    specials: Card[] = [];\r\n}\r\n\r\nexport class LogRecord {\r\n    text: string;\r\n    created: Date;\r\n}\r\n\r\nexport class Card {\r\n    id: string;\r\n    used?: boolean; // \r\n    sakuraToken?: number; // \r\n    type: string;\r\n\r\n    constructor(id: string){\r\n        this.id = id;\r\n    }\r\n\r\n    get data(): CardDataItem{\r\n        return CARD_DATA[this.id];\r\n    }\r\n}\r\n\r\nexport class SpecialCard extends Card {\r\n    used: boolean = false;\r\n}\r\n\r\n\r\n"],"sourceRoot":""}